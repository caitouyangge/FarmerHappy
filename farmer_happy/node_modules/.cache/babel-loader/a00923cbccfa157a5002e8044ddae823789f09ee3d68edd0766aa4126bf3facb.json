{"ast":null,"code":"import { ref, computed, onMounted } from 'vue';\nimport { orderService } from '../api/order';\nimport logger from '../utils/logger';\nexport default {\n  name: 'OrderForm',\n  props: {\n    product: {\n      type: Object,\n      required: true\n    }\n  },\n  emits: ['close', 'success'],\n  setup(props, {\n    emit\n  }) {\n    const loading = ref(false);\n    const submitting = ref(false);\n    const error = ref('');\n    const formData = ref({\n      quantity: 1,\n      buyer_name: '',\n      buyer_address: '',\n      buyer_phone: '',\n      remark: ''\n    });\n\n    // 获取用户信息\n    onMounted(() => {\n      const storedUser = localStorage.getItem('user');\n      if (storedUser) {\n        try {\n          const userInfo = JSON.parse(storedUser);\n          // 自动填充用户信息\n          if (userInfo.nickname) {\n            formData.value.buyer_name = userInfo.nickname;\n          }\n          if (userInfo.phone) {\n            formData.value.buyer_phone = userInfo.phone;\n          }\n          // 如果是买家，尝试填充收货地址\n          if (userInfo.userType === 'buyer' && userInfo.shippingAddress) {\n            formData.value.buyer_address = userInfo.shippingAddress;\n          }\n        } catch (err) {\n          logger.error('ORDER_FORM', '解析用户信息失败', {}, err);\n        }\n      }\n    });\n\n    // 计算订单总额\n    const totalAmount = computed(() => {\n      const price = parseFloat(props.product.price) || 0;\n      const quantity = formData.value.quantity || 1;\n      return price * quantity;\n    });\n\n    // 表单验证\n    const isFormValid = computed(() => {\n      return formData.value.quantity > 0 && formData.value.quantity <= Math.min(props.product.stock || 100, 100) && formData.value.buyer_name.trim() !== '' && formData.value.buyer_address.trim() !== '' && formData.value.buyer_phone.trim() !== '' && /^1[3-9]\\d{9}$/.test(formData.value.buyer_phone);\n    });\n\n    // 增加数量\n    const increaseQuantity = () => {\n      const maxQuantity = Math.min(props.product.stock || 100, 100);\n      if (formData.value.quantity < maxQuantity) {\n        formData.value.quantity++;\n        error.value = '';\n      }\n    };\n\n    // 减少数量\n    const decreaseQuantity = () => {\n      if (formData.value.quantity > 1) {\n        formData.value.quantity--;\n        error.value = '';\n      }\n    };\n\n    // 验证数量\n    const validateQuantity = () => {\n      const maxQuantity = Math.min(props.product.stock || 100, 100);\n      if (formData.value.quantity < 1) {\n        formData.value.quantity = 1;\n      } else if (formData.value.quantity > maxQuantity) {\n        formData.value.quantity = maxQuantity;\n        error.value = `最多可购买 ${maxQuantity} 斤`;\n      } else {\n        error.value = '';\n      }\n    };\n\n    // 关闭弹窗\n    const handleClose = () => {\n      logger.userAction('ORDER_FORM_CLOSE', {\n        productId: props.product.product_id\n      });\n      emit('close');\n    };\n\n    // 点击遮罩层关闭\n    const handleOverlayClick = event => {\n      if (event.target === event.currentTarget) {\n        handleClose();\n      }\n    };\n\n    // 提交订单\n    const handleSubmit = async () => {\n      if (!isFormValid.value) {\n        error.value = '请填写完整的订单信息';\n        return;\n      }\n      submitting.value = true;\n      error.value = '';\n      try {\n        logger.userAction('ORDER_FORM_SUBMIT', {\n          productId: props.product.product_id,\n          quantity: formData.value.quantity\n        });\n        const orderData = {\n          product_id: String(props.product.product_id),\n          quantity: formData.value.quantity,\n          buyer_name: formData.value.buyer_name.trim(),\n          buyer_address: formData.value.buyer_address.trim(),\n          buyer_phone: formData.value.buyer_phone.trim(),\n          remark: formData.value.remark.trim() || undefined\n        };\n        const response = await orderService.createOrder(orderData);\n        logger.info('ORDER_FORM', '订单创建成功', {\n          orderId: response.data?.order_id,\n          productId: props.product.product_id\n        });\n\n        // 显示成功消息\n        alert(`订单创建成功！\\n订单号：${response.data?.order_id || '未知'}\\n订单总额：¥${totalAmount.value.toFixed(2)}`);\n\n        // 触发成功事件\n        emit('success', response.data);\n\n        // 关闭弹窗\n        handleClose();\n      } catch (err) {\n        logger.error('ORDER_FORM', '订单创建失败', {\n          productId: props.product.product_id,\n          errorMessage: err.message || err\n        }, err);\n\n        // 显示错误信息\n        if (err.code && err.message) {\n          error.value = err.message;\n        } else if (typeof err === 'string') {\n          error.value = err;\n        } else {\n          error.value = '创建订单失败，请稍后重试';\n        }\n      } finally {\n        submitting.value = false;\n      }\n    };\n    return {\n      loading,\n      submitting,\n      error,\n      formData,\n      totalAmount,\n      isFormValid,\n      increaseQuantity,\n      decreaseQuantity,\n      validateQuantity,\n      handleClose,\n      handleOverlayClick,\n      handleSubmit\n    };\n  }\n};","map":{"version":3,"names":["ref","computed","onMounted","orderService","logger","name","props","product","type","Object","required","emits","setup","emit","loading","submitting","error","formData","quantity","buyer_name","buyer_address","buyer_phone","remark","storedUser","localStorage","getItem","userInfo","JSON","parse","nickname","value","phone","userType","shippingAddress","err","totalAmount","price","parseFloat","isFormValid","Math","min","stock","trim","test","increaseQuantity","maxQuantity","decreaseQuantity","validateQuantity","handleClose","userAction","productId","product_id","handleOverlayClick","event","target","currentTarget","handleSubmit","orderData","String","undefined","response","createOrder","info","orderId","data","order_id","alert","toFixed","errorMessage","message","code"],"sources":["D:\\STUDY\\FarmerHappy\\farmer_happy\\src\\components\\OrderForm.vue"],"sourcesContent":["<template>\r\n  <div class=\"modal-overlay\" @click=\"handleOverlayClick\">\r\n    <div class=\"modal-container\" @click.stop>\r\n      <div class=\"modal-header\">\r\n        <h2 class=\"modal-title\">创建订单</h2>\r\n        <button class=\"close-btn\" @click=\"handleClose\">\r\n          <span class=\"close-icon\">×</span>\r\n        </button>\r\n      </div>\r\n\r\n      <div class=\"modal-content\">\r\n        <div v-if=\"loading\" class=\"loading-container\">\r\n          <div class=\"loading-spinner\"></div>\r\n          <p>提交中...</p>\r\n        </div>\r\n\r\n        <div v-else class=\"order-form\">\r\n          <!-- 商品信息 -->\r\n          <div class=\"product-section\">\r\n            <h3 class=\"section-title\">商品信息</h3>\r\n            <div class=\"product-info-card\">\r\n              <div class=\"product-name\">{{ product.title }}</div>\r\n              <div class=\"product-details\">\r\n                <div class=\"detail-row\">\r\n                  <span class=\"detail-label\">单价：</span>\r\n                  <span class=\"detail-value price\">¥{{ product.price || '面议' }}</span>\r\n                </div>\r\n                <div class=\"detail-row\">\r\n                  <span class=\"detail-label\">库存：</span>\r\n                  <span class=\"detail-value\">{{ product.stock || 0 }} 斤</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- 订单信息表单 -->\r\n          <div class=\"form-section\">\r\n            <h3 class=\"section-title\">订单信息</h3>\r\n            \r\n            <div class=\"form-group\">\r\n              <label class=\"form-label\">\r\n                购买数量 <span class=\"required\">*</span>\r\n              </label>\r\n              <div class=\"quantity-control\">\r\n                <button \r\n                  class=\"quantity-btn\" \r\n                  @click=\"decreaseQuantity\"\r\n                  :disabled=\"formData.quantity <= 1\"\r\n                >\r\n                  -\r\n                </button>\r\n                <input\r\n                  v-model.number=\"formData.quantity\"\r\n                  type=\"number\"\r\n                  min=\"1\"\r\n                  :max=\"product.stock || 100\"\r\n                  class=\"quantity-input\"\r\n                  @input=\"validateQuantity\"\r\n                />\r\n                <button \r\n                  class=\"quantity-btn\" \r\n                  @click=\"increaseQuantity\"\r\n                  :disabled=\"formData.quantity >= (product.stock || 100)\"\r\n                >\r\n                  +\r\n                </button>\r\n                <span class=\"quantity-unit\">斤</span>\r\n              </div>\r\n              <div class=\"form-hint\">\r\n                最多可购买 {{ product.stock || 0 }} 斤，单次最多 100 斤\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"form-group\">\r\n              <label class=\"form-label\">\r\n                买家姓名 <span class=\"required\">*</span>\r\n              </label>\r\n              <input\r\n                v-model=\"formData.buyer_name\"\r\n                type=\"text\"\r\n                placeholder=\"请输入买家姓名\"\r\n                class=\"form-input\"\r\n                maxlength=\"50\"\r\n              />\r\n            </div>\r\n\r\n            <div class=\"form-group\">\r\n              <label class=\"form-label\">\r\n                收货地址 <span class=\"required\">*</span>\r\n              </label>\r\n              <textarea\r\n                v-model=\"formData.buyer_address\"\r\n                placeholder=\"请输入详细收货地址\"\r\n                class=\"form-textarea\"\r\n                rows=\"3\"\r\n                maxlength=\"200\"\r\n              ></textarea>\r\n            </div>\r\n\r\n            <div class=\"form-group\">\r\n              <label class=\"form-label\">\r\n                买家手机号 <span class=\"required\">*</span>\r\n              </label>\r\n              <input\r\n                v-model=\"formData.buyer_phone\"\r\n                type=\"tel\"\r\n                placeholder=\"请输入手机号\"\r\n                class=\"form-input\"\r\n                maxlength=\"11\"\r\n              />\r\n            </div>\r\n\r\n            <div class=\"form-group\">\r\n              <label class=\"form-label\">订单备注</label>\r\n              <textarea\r\n                v-model=\"formData.remark\"\r\n                placeholder=\"选填，如有特殊要求请在此说明\"\r\n                class=\"form-textarea\"\r\n                rows=\"2\"\r\n                maxlength=\"200\"\r\n              ></textarea>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- 订单汇总 -->\r\n          <div class=\"summary-section\">\r\n            <h3 class=\"section-title\">订单汇总</h3>\r\n            <div class=\"summary-card\">\r\n              <div class=\"summary-row\">\r\n                <span class=\"summary-label\">商品单价：</span>\r\n                <span class=\"summary-value\">¥{{ product.price || 0 }}</span>\r\n              </div>\r\n              <div class=\"summary-row\">\r\n                <span class=\"summary-label\">购买数量：</span>\r\n                <span class=\"summary-value\">{{ formData.quantity }} 斤</span>\r\n              </div>\r\n              <div class=\"summary-row total\">\r\n                <span class=\"summary-label\">订单总额：</span>\r\n                <span class=\"summary-value total-price\">¥{{ totalAmount.toFixed(2) }}</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- 错误提示 -->\r\n          <div v-if=\"error\" class=\"error-message\">\r\n            <span class=\"error-icon\">⚠️</span>\r\n            {{ error }}\r\n          </div>\r\n\r\n          <!-- 操作按钮 -->\r\n          <div class=\"action-section\">\r\n            <button class=\"action-btn cancel-btn\" @click=\"handleClose\">\r\n              取消\r\n            </button>\r\n            <button \r\n              class=\"action-btn submit-btn\" \r\n              @click=\"handleSubmit\"\r\n              :disabled=\"!isFormValid || submitting\"\r\n            >\r\n              <span v-if=\"submitting\">提交中...</span>\r\n              <span v-else>确认下单</span>\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, computed, onMounted } from 'vue';\r\nimport { orderService } from '../api/order';\r\nimport logger from '../utils/logger';\r\n\r\nexport default {\r\n  name: 'OrderForm',\r\n  props: {\r\n    product: {\r\n      type: Object,\r\n      required: true\r\n    }\r\n  },\r\n  emits: ['close', 'success'],\r\n  setup(props, { emit }) {\r\n    const loading = ref(false);\r\n    const submitting = ref(false);\r\n    const error = ref('');\r\n    const formData = ref({\r\n      quantity: 1,\r\n      buyer_name: '',\r\n      buyer_address: '',\r\n      buyer_phone: '',\r\n      remark: ''\r\n    });\r\n\r\n    // 获取用户信息\r\n    onMounted(() => {\r\n      const storedUser = localStorage.getItem('user');\r\n      if (storedUser) {\r\n        try {\r\n          const userInfo = JSON.parse(storedUser);\r\n          // 自动填充用户信息\r\n          if (userInfo.nickname) {\r\n            formData.value.buyer_name = userInfo.nickname;\r\n          }\r\n          if (userInfo.phone) {\r\n            formData.value.buyer_phone = userInfo.phone;\r\n          }\r\n          // 如果是买家，尝试填充收货地址\r\n          if (userInfo.userType === 'buyer' && userInfo.shippingAddress) {\r\n            formData.value.buyer_address = userInfo.shippingAddress;\r\n          }\r\n        } catch (err) {\r\n          logger.error('ORDER_FORM', '解析用户信息失败', {}, err);\r\n        }\r\n      }\r\n    });\r\n\r\n    // 计算订单总额\r\n    const totalAmount = computed(() => {\r\n      const price = parseFloat(props.product.price) || 0;\r\n      const quantity = formData.value.quantity || 1;\r\n      return price * quantity;\r\n    });\r\n\r\n    // 表单验证\r\n    const isFormValid = computed(() => {\r\n      return (\r\n        formData.value.quantity > 0 &&\r\n        formData.value.quantity <= Math.min(props.product.stock || 100, 100) &&\r\n        formData.value.buyer_name.trim() !== '' &&\r\n        formData.value.buyer_address.trim() !== '' &&\r\n        formData.value.buyer_phone.trim() !== '' &&\r\n        /^1[3-9]\\d{9}$/.test(formData.value.buyer_phone)\r\n      );\r\n    });\r\n\r\n    // 增加数量\r\n    const increaseQuantity = () => {\r\n      const maxQuantity = Math.min(props.product.stock || 100, 100);\r\n      if (formData.value.quantity < maxQuantity) {\r\n        formData.value.quantity++;\r\n        error.value = '';\r\n      }\r\n    };\r\n\r\n    // 减少数量\r\n    const decreaseQuantity = () => {\r\n      if (formData.value.quantity > 1) {\r\n        formData.value.quantity--;\r\n        error.value = '';\r\n      }\r\n    };\r\n\r\n    // 验证数量\r\n    const validateQuantity = () => {\r\n      const maxQuantity = Math.min(props.product.stock || 100, 100);\r\n      if (formData.value.quantity < 1) {\r\n        formData.value.quantity = 1;\r\n      } else if (formData.value.quantity > maxQuantity) {\r\n        formData.value.quantity = maxQuantity;\r\n        error.value = `最多可购买 ${maxQuantity} 斤`;\r\n      } else {\r\n        error.value = '';\r\n      }\r\n    };\r\n\r\n    // 关闭弹窗\r\n    const handleClose = () => {\r\n      logger.userAction('ORDER_FORM_CLOSE', { productId: props.product.product_id });\r\n      emit('close');\r\n    };\r\n\r\n    // 点击遮罩层关闭\r\n    const handleOverlayClick = (event) => {\r\n      if (event.target === event.currentTarget) {\r\n        handleClose();\r\n      }\r\n    };\r\n\r\n    // 提交订单\r\n    const handleSubmit = async () => {\r\n      if (!isFormValid.value) {\r\n        error.value = '请填写完整的订单信息';\r\n        return;\r\n      }\r\n\r\n      submitting.value = true;\r\n      error.value = '';\r\n\r\n      try {\r\n        logger.userAction('ORDER_FORM_SUBMIT', {\r\n          productId: props.product.product_id,\r\n          quantity: formData.value.quantity\r\n        });\r\n\r\n        const orderData = {\r\n          product_id: String(props.product.product_id),\r\n          quantity: formData.value.quantity,\r\n          buyer_name: formData.value.buyer_name.trim(),\r\n          buyer_address: formData.value.buyer_address.trim(),\r\n          buyer_phone: formData.value.buyer_phone.trim(),\r\n          remark: formData.value.remark.trim() || undefined\r\n        };\r\n\r\n        const response = await orderService.createOrder(orderData);\r\n\r\n        logger.info('ORDER_FORM', '订单创建成功', {\r\n          orderId: response.data?.order_id,\r\n          productId: props.product.product_id\r\n        });\r\n\r\n        // 显示成功消息\r\n        alert(`订单创建成功！\\n订单号：${response.data?.order_id || '未知'}\\n订单总额：¥${totalAmount.value.toFixed(2)}`);\r\n\r\n        // 触发成功事件\r\n        emit('success', response.data);\r\n\r\n        // 关闭弹窗\r\n        handleClose();\r\n      } catch (err) {\r\n        logger.error('ORDER_FORM', '订单创建失败', {\r\n          productId: props.product.product_id,\r\n          errorMessage: err.message || err\r\n        }, err);\r\n\r\n        // 显示错误信息\r\n        if (err.code && err.message) {\r\n          error.value = err.message;\r\n        } else if (typeof err === 'string') {\r\n          error.value = err;\r\n        } else {\r\n          error.value = '创建订单失败，请稍后重试';\r\n        }\r\n      } finally {\r\n        submitting.value = false;\r\n      }\r\n    };\r\n\r\n    return {\r\n      loading,\r\n      submitting,\r\n      error,\r\n      formData,\r\n      totalAmount,\r\n      isFormValid,\r\n      increaseQuantity,\r\n      decreaseQuantity,\r\n      validateQuantity,\r\n      handleClose,\r\n      handleOverlayClick,\r\n      handleSubmit\r\n    };\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n@import '../assets/styles/theme.css';\r\n\r\n.modal-overlay {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background: rgba(0, 0, 0, 0.5);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  z-index: 1000;\r\n  padding: 1rem;\r\n}\r\n\r\n.modal-container {\r\n  background: var(--white);\r\n  border-radius: 16px;\r\n  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);\r\n  width: 100%;\r\n  max-width: 600px;\r\n  max-height: 90vh;\r\n  overflow: hidden;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.modal-header {\r\n  padding: 1.5rem 2rem;\r\n  border-bottom: 1px solid var(--gray-200);\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.modal-title {\r\n  font-size: 1.25rem;\r\n  font-weight: 600;\r\n  color: var(--primary);\r\n  margin: 0;\r\n}\r\n\r\n.close-btn {\r\n  width: 32px;\r\n  height: 32px;\r\n  border: none;\r\n  background: transparent;\r\n  border-radius: 50%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  cursor: pointer;\r\n  transition: background 0.2s;\r\n}\r\n\r\n.close-btn:hover {\r\n  background: var(--gray-100);\r\n}\r\n\r\n.close-icon {\r\n  font-size: 1.5rem;\r\n  color: var(--gray-500);\r\n}\r\n\r\n.modal-content {\r\n  flex: 1;\r\n  overflow-y: auto;\r\n  padding: 2rem;\r\n}\r\n\r\n.loading-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 4rem 2rem;\r\n}\r\n\r\n.loading-spinner {\r\n  width: 40px;\r\n  height: 40px;\r\n  border: 4px solid var(--gray-200);\r\n  border-top: 4px solid var(--primary);\r\n  border-radius: 50%;\r\n  animation: spin 1s linear infinite;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n@keyframes spin {\r\n  0% { transform: rotate(0deg); }\r\n  100% { transform: rotate(360deg); }\r\n}\r\n\r\n.order-form {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 1.5rem;\r\n}\r\n\r\n.section-title {\r\n  font-size: 1.125rem;\r\n  font-weight: 600;\r\n  color: #1a202c;\r\n  margin: 0 0 1rem 0;\r\n  padding-bottom: 0.5rem;\r\n  border-bottom: 2px solid var(--primary-light);\r\n}\r\n\r\n/* 商品信息 */\r\n.product-section {\r\n  margin-bottom: 0.5rem;\r\n}\r\n\r\n.product-info-card {\r\n  background: var(--gray-100);\r\n  border-radius: 12px;\r\n  padding: 1.5rem;\r\n}\r\n\r\n.product-name {\r\n  font-size: 1.125rem;\r\n  font-weight: 600;\r\n  color: #1a202c;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.product-details {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 0.5rem;\r\n}\r\n\r\n.detail-row {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.detail-label {\r\n  font-size: 0.875rem;\r\n  color: var(--gray-500);\r\n}\r\n\r\n.detail-value {\r\n  font-size: 0.875rem;\r\n  color: #1a202c;\r\n  font-weight: 500;\r\n}\r\n\r\n.detail-value.price {\r\n  font-size: 1.125rem;\r\n  color: var(--primary);\r\n  font-weight: 700;\r\n}\r\n\r\n/* 表单 */\r\n.form-section {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 1.25rem;\r\n}\r\n\r\n.form-group {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 0.5rem;\r\n}\r\n\r\n.form-label {\r\n  font-size: 0.875rem;\r\n  font-weight: 500;\r\n  color: #1a202c;\r\n}\r\n\r\n.required {\r\n  color: var(--error);\r\n}\r\n\r\n.quantity-control {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n}\r\n\r\n.quantity-btn {\r\n  width: 36px;\r\n  height: 36px;\r\n  border: 1px solid var(--gray-300);\r\n  background: var(--white);\r\n  border-radius: 6px;\r\n  font-size: 1.125rem;\r\n  font-weight: 600;\r\n  color: var(--gray-600);\r\n  cursor: pointer;\r\n  transition: all 0.2s;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.quantity-btn:hover:not(:disabled) {\r\n  background: var(--primary-light);\r\n  border-color: var(--primary);\r\n  color: var(--primary);\r\n}\r\n\r\n.quantity-btn:disabled {\r\n  opacity: 0.5;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.quantity-input {\r\n  width: 80px;\r\n  height: 36px;\r\n  padding: 0 0.5rem;\r\n  border: 1px solid var(--gray-300);\r\n  border-radius: 6px;\r\n  text-align: center;\r\n  font-size: 0.875rem;\r\n  font-weight: 500;\r\n}\r\n\r\n.quantity-input:focus {\r\n  outline: none;\r\n  border-color: var(--primary);\r\n}\r\n\r\n.quantity-unit {\r\n  font-size: 0.875rem;\r\n  color: var(--gray-500);\r\n}\r\n\r\n.form-input,\r\n.form-textarea {\r\n  padding: 0.75rem;\r\n  border: 1px solid var(--gray-300);\r\n  border-radius: 8px;\r\n  font-size: 0.875rem;\r\n  font-family: inherit;\r\n  transition: border-color 0.2s;\r\n}\r\n\r\n.form-input:focus,\r\n.form-textarea:focus {\r\n  outline: none;\r\n  border-color: var(--primary);\r\n}\r\n\r\n.form-textarea {\r\n  resize: vertical;\r\n  min-height: 60px;\r\n}\r\n\r\n.form-hint {\r\n  font-size: 0.75rem;\r\n  color: var(--gray-400);\r\n}\r\n\r\n/* 订单汇总 */\r\n.summary-section {\r\n  margin-top: 0.5rem;\r\n}\r\n\r\n.summary-card {\r\n  background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);\r\n  border-radius: 12px;\r\n  padding: 1.5rem;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 0.75rem;\r\n}\r\n\r\n.summary-row {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.summary-label {\r\n  font-size: 0.875rem;\r\n  color: var(--gray-600);\r\n}\r\n\r\n.summary-value {\r\n  font-size: 0.875rem;\r\n  color: #1a202c;\r\n  font-weight: 500;\r\n}\r\n\r\n.summary-row.total {\r\n  padding-top: 0.75rem;\r\n  border-top: 2px solid rgba(107, 70, 193, 0.2);\r\n  margin-top: 0.25rem;\r\n}\r\n\r\n.summary-row.total .summary-label {\r\n  font-size: 1rem;\r\n  font-weight: 600;\r\n  color: #1a202c;\r\n}\r\n\r\n.total-price {\r\n  font-size: 1.5rem;\r\n  font-weight: 700;\r\n  color: var(--primary);\r\n}\r\n\r\n/* 错误提示 */\r\n.error-message {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n  padding: 0.75rem 1rem;\r\n  background: #fee;\r\n  border: 1px solid var(--error);\r\n  border-radius: 8px;\r\n  color: var(--error);\r\n  font-size: 0.875rem;\r\n}\r\n\r\n.error-icon {\r\n  font-size: 1rem;\r\n}\r\n\r\n/* 操作按钮 */\r\n.action-section {\r\n  display: flex;\r\n  gap: 1rem;\r\n  padding-top: 1rem;\r\n  border-top: 1px solid var(--gray-200);\r\n}\r\n\r\n.action-btn {\r\n  flex: 1;\r\n  padding: 0.875rem 1.5rem;\r\n  border: none;\r\n  border-radius: 8px;\r\n  font-size: 0.875rem;\r\n  font-weight: 500;\r\n  cursor: pointer;\r\n  transition: all 0.2s;\r\n}\r\n\r\n.cancel-btn {\r\n  background: var(--gray-200);\r\n  color: var(--gray-600);\r\n}\r\n\r\n.cancel-btn:hover {\r\n  background: var(--gray-300);\r\n}\r\n\r\n.submit-btn {\r\n  background: var(--primary);\r\n  color: var(--white);\r\n}\r\n\r\n.submit-btn:hover:not(:disabled) {\r\n  background: var(--primary-dark);\r\n}\r\n\r\n.submit-btn:disabled {\r\n  opacity: 0.5;\r\n  cursor: not-allowed;\r\n}\r\n\r\n/* 响应式设计 */\r\n@media (max-width: 768px) {\r\n  .modal-container {\r\n    max-height: 95vh;\r\n  }\r\n\r\n  .modal-header {\r\n    padding: 1rem;\r\n  }\r\n\r\n  .modal-content {\r\n    padding: 1.5rem;\r\n  }\r\n\r\n  .action-section {\r\n    flex-direction: column;\r\n  }\r\n\r\n  .action-btn {\r\n    width: 100%;\r\n  }\r\n}\r\n</style>\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}