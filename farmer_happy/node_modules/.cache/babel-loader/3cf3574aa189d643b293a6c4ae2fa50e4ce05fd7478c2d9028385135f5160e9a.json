{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, vModelSelect as _vModelSelect, normalizeClass as _normalizeClass, withDirectives as _withDirectives, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, vModelText as _vModelText, renderList as _renderList, Fragment as _Fragment, withModifiers as _withModifiers } from \"vue\";\nconst _hoisted_1 = {\n  class: \"content-form-container\"\n};\nconst _hoisted_2 = {\n  class: \"header\"\n};\nconst _hoisted_3 = {\n  class: \"main-content\"\n};\nconst _hoisted_4 = {\n  class: \"form-wrapper\"\n};\nconst _hoisted_5 = {\n  class: \"form-group\"\n};\nconst _hoisted_6 = {\n  key: 0,\n  class: \"form-error\"\n};\nconst _hoisted_7 = {\n  class: \"form-group\"\n};\nconst _hoisted_8 = {\n  class: \"input-hint\"\n};\nconst _hoisted_9 = {\n  class: \"char-count\"\n};\nconst _hoisted_10 = {\n  key: 0,\n  class: \"form-error\"\n};\nconst _hoisted_11 = {\n  class: \"form-group\"\n};\nconst _hoisted_12 = {\n  class: \"input-hint\"\n};\nconst _hoisted_13 = {\n  class: \"char-count\"\n};\nconst _hoisted_14 = {\n  key: 0,\n  class: \"form-error\"\n};\nconst _hoisted_15 = {\n  class: \"form-group\"\n};\nconst _hoisted_16 = {\n  class: \"image-upload-section\"\n};\nconst _hoisted_17 = {\n  class: \"image-preview-list\"\n};\nconst _hoisted_18 = [\"src\", \"alt\"];\nconst _hoisted_19 = [\"onClick\"];\nconst _hoisted_20 = {\n  key: 0,\n  class: \"upload-btn\"\n};\nconst _hoisted_21 = {\n  key: 0,\n  class: \"form-error\"\n};\nconst _hoisted_22 = {\n  class: \"form-actions\"\n};\nconst _hoisted_23 = [\"disabled\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createCommentVNode(\" È°∂ÈÉ®ÂØºËà™Ê†è \"), _createElementVNode(\"header\", _hoisted_2, [_createElementVNode(\"button\", {\n    class: \"btn-back\",\n    onClick: _cache[0] || (_cache[0] = (...args) => $setup.goBack && $setup.goBack(...args))\n  }, [...(_cache[10] || (_cache[10] = [_createElementVNode(\"span\", {\n    class: \"back-icon\"\n  }, \"‚Üê\", -1 /* CACHED */), _createTextVNode(\" ËøîÂõû \", -1 /* CACHED */)]))]), _cache[11] || (_cache[11] = _createElementVNode(\"h1\", {\n    class: \"header-title\"\n  }, \"ÂèëÂ∏ÉÂÜÖÂÆπ\", -1 /* CACHED */)), _cache[12] || (_cache[12] = _createElementVNode(\"div\", {\n    class: \"header-placeholder\"\n  }, null, -1 /* CACHED */))]), _createCommentVNode(\" Ë°®ÂçïÂÜÖÂÆπ \"), _createElementVNode(\"main\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"form\", {\n    onSubmit: _cache[9] || (_cache[9] = _withModifiers((...args) => $setup.handleSubmit && $setup.handleSubmit(...args), [\"prevent\"])),\n    class: \"content-form\"\n  }, [_createCommentVNode(\" ÂÜÖÂÆπÁ±ªÂûã \"), _createElementVNode(\"div\", _hoisted_5, [_cache[14] || (_cache[14] = _createElementVNode(\"label\", {\n    class: \"form-label\"\n  }, [_createTextVNode(\"ÂÜÖÂÆπÁ±ªÂûã \"), _createElementVNode(\"span\", {\n    class: \"required\"\n  }, \"*\")], -1 /* CACHED */)), _withDirectives(_createElementVNode(\"select\", {\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.form.content_type = $event),\n    class: _normalizeClass([\"form-input\", {\n      'error': $setup.errors.content_type\n    }]),\n    onChange: _cache[2] || (_cache[2] = $event => $setup.clearError('content_type'))\n  }, [...(_cache[13] || (_cache[13] = [_createElementVNode(\"option\", {\n    value: \"\"\n  }, \"ËØ∑ÈÄâÊã©ÂÜÖÂÆπÁ±ªÂûã\", -1 /* CACHED */), _createElementVNode(\"option\", {\n    value: \"articles\"\n  }, \"ÊñáÁ´†\", -1 /* CACHED */), _createElementVNode(\"option\", {\n    value: \"questions\"\n  }, \"ÊèêÈóÆ\", -1 /* CACHED */), _createElementVNode(\"option\", {\n    value: \"experiences\"\n  }, \"ÁªèÈ™åÂàÜ‰∫´\", -1 /* CACHED */)]))], 34 /* CLASS, NEED_HYDRATION */), [[_vModelSelect, $setup.form.content_type]]), $setup.errors.content_type ? (_openBlock(), _createElementBlock(\"span\", _hoisted_6, _toDisplayString($setup.errors.content_type), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)]), _createCommentVNode(\" Ê†áÈ¢ò \"), _createElementVNode(\"div\", _hoisted_7, [_cache[15] || (_cache[15] = _createElementVNode(\"label\", {\n    class: \"form-label\"\n  }, [_createTextVNode(\"Ê†áÈ¢ò \"), _createElementVNode(\"span\", {\n    class: \"required\"\n  }, \"*\")], -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $setup.form.title = $event),\n    type: \"text\",\n    class: _normalizeClass([\"form-input\", {\n      'error': $setup.errors.title\n    }]),\n    placeholder: \"ËØ∑ËæìÂÖ•Ê†áÈ¢ò\",\n    maxlength: \"100\",\n    onInput: _cache[4] || (_cache[4] = $event => $setup.clearError('title'))\n  }, null, 34 /* CLASS, NEED_HYDRATION */), [[_vModelText, $setup.form.title]]), _createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"span\", _hoisted_9, _toDisplayString($setup.form.title.length) + \"/100\", 1 /* TEXT */)]), $setup.errors.title ? (_openBlock(), _createElementBlock(\"span\", _hoisted_10, _toDisplayString($setup.errors.title), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)]), _createCommentVNode(\" ÂÜÖÂÆπ \"), _createElementVNode(\"div\", _hoisted_11, [_cache[16] || (_cache[16] = _createElementVNode(\"label\", {\n    class: \"form-label\"\n  }, [_createTextVNode(\"ÂÜÖÂÆπ \"), _createElementVNode(\"span\", {\n    class: \"required\"\n  }, \"*\")], -1 /* CACHED */)), _withDirectives(_createElementVNode(\"textarea\", {\n    \"onUpdate:modelValue\": _cache[5] || (_cache[5] = $event => $setup.form.content = $event),\n    class: _normalizeClass([\"form-textarea\", {\n      'error': $setup.errors.content\n    }]),\n    placeholder: \"ËØ∑ËæìÂÖ•ÂÜÖÂÆπ...\",\n    rows: \"12\",\n    onInput: _cache[6] || (_cache[6] = $event => $setup.clearError('content'))\n  }, null, 34 /* CLASS, NEED_HYDRATION */), [[_vModelText, $setup.form.content]]), _createElementVNode(\"div\", _hoisted_12, [_createElementVNode(\"span\", _hoisted_13, _toDisplayString($setup.form.content.length) + \"/5000\", 1 /* TEXT */)]), $setup.errors.content ? (_openBlock(), _createElementBlock(\"span\", _hoisted_14, _toDisplayString($setup.errors.content), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)]), _createCommentVNode(\" ÂõæÁâá‰∏ä‰º†ÔºàÂèØÈÄâÔºâ \"), _createElementVNode(\"div\", _hoisted_15, [_cache[19] || (_cache[19] = _createElementVNode(\"label\", {\n    class: \"form-label\"\n  }, \"ÂõæÁâáÔºàÂèØÈÄâÔºâ\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_16, [_createElementVNode(\"div\", _hoisted_17, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.imagePreviews, (image, idx) => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: idx,\n      class: \"image-preview-item\"\n    }, [_createElementVNode(\"img\", {\n      src: image,\n      alt: `È¢ÑËßà${idx + 1}`,\n      class: \"preview-image\"\n    }, null, 8 /* PROPS */, _hoisted_18), _createElementVNode(\"button\", {\n      type: \"button\",\n      class: \"btn-remove-image\",\n      onClick: $event => $setup.removeImage(idx)\n    }, \" √ó \", 8 /* PROPS */, _hoisted_19)]);\n  }), 128 /* KEYED_FRAGMENT */))]), $setup.imagePreviews.length < 9 ? (_openBlock(), _createElementBlock(\"label\", _hoisted_20, [_createElementVNode(\"input\", {\n    type: \"file\",\n    accept: \"image/*\",\n    multiple: \"\",\n    onChange: _cache[7] || (_cache[7] = (...args) => $setup.handleImageSelect && $setup.handleImageSelect(...args)),\n    class: \"file-input\"\n  }, null, 32 /* NEED_HYDRATION */), _cache[17] || (_cache[17] = _createElementVNode(\"span\", {\n    class: \"upload-icon\"\n  }, \"üì∑\", -1 /* CACHED */)), _cache[18] || (_cache[18] = _createElementVNode(\"span\", {\n    class: \"upload-text\"\n  }, \"Ê∑ªÂä†ÂõæÁâá\", -1 /* CACHED */))])) : _createCommentVNode(\"v-if\", true)]), _cache[20] || (_cache[20] = _createElementVNode(\"div\", {\n    class: \"upload-hint\"\n  }, \" ÊúÄÂ§öÂèØ‰∏ä‰º† 9 Âº†ÂõæÁâáÔºåÊîØÊåÅ JPG„ÄÅPNG Ê†ºÂºè \", -1 /* CACHED */)), $setup.errors.images ? (_openBlock(), _createElementBlock(\"span\", _hoisted_21, _toDisplayString($setup.errors.images), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)]), _createCommentVNode(\" Êèê‰∫§ÊåâÈíÆ \"), _createElementVNode(\"div\", _hoisted_22, [_createElementVNode(\"button\", {\n    type: \"button\",\n    class: \"btn btn-cancel\",\n    onClick: _cache[8] || (_cache[8] = (...args) => $setup.goBack && $setup.goBack(...args))\n  }, \" ÂèñÊ∂à \"), _createElementVNode(\"button\", {\n    type: \"submit\",\n    class: \"btn btn-submit\",\n    disabled: $setup.submitting\n  }, _toDisplayString($setup.submitting ? 'ÂèëÂ∏É‰∏≠...' : 'ÂèëÂ∏ÉÂÜÖÂÆπ'), 9 /* TEXT, PROPS */, _hoisted_23)])], 32 /* NEED_HYDRATION */)])])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createCommentVNode","_createElementVNode","_hoisted_2","onClick","_cache","args","$setup","goBack","_hoisted_3","_hoisted_4","onSubmit","_withModifiers","handleSubmit","_hoisted_5","form","content_type","$event","_normalizeClass","errors","onChange","clearError","value","_hoisted_6","_toDisplayString","_hoisted_7","title","type","placeholder","maxlength","onInput","_hoisted_8","_hoisted_9","length","_hoisted_10","_hoisted_11","content","rows","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_Fragment","_renderList","imagePreviews","image","idx","key","src","alt","removeImage","_hoisted_19","_hoisted_20","accept","multiple","handleImageSelect","images","_hoisted_21","_hoisted_22","disabled","submitting","_hoisted_23"],"sources":["D:\\STUDY\\FarmerHappy\\farmer_happy\\src\\community\\ContentForm.vue"],"sourcesContent":["<template>\r\n  <div class=\"content-form-container\">\r\n    <!-- È°∂ÈÉ®ÂØºËà™Ê†è -->\r\n    <header class=\"header\">\r\n      <button class=\"btn-back\" @click=\"goBack\">\r\n        <span class=\"back-icon\">‚Üê</span>\r\n        ËøîÂõû\r\n      </button>\r\n      <h1 class=\"header-title\">ÂèëÂ∏ÉÂÜÖÂÆπ</h1>\r\n      <div class=\"header-placeholder\"></div>\r\n    </header>\r\n\r\n    <!-- Ë°®ÂçïÂÜÖÂÆπ -->\r\n    <main class=\"main-content\">\r\n      <div class=\"form-wrapper\">\r\n        <form @submit.prevent=\"handleSubmit\" class=\"content-form\">\r\n          <!-- ÂÜÖÂÆπÁ±ªÂûã -->\r\n          <div class=\"form-group\">\r\n            <label class=\"form-label\">ÂÜÖÂÆπÁ±ªÂûã <span class=\"required\">*</span></label>\r\n            <select\r\n              v-model=\"form.content_type\"\r\n              class=\"form-input\"\r\n              :class=\"{ 'error': errors.content_type }\"\r\n              @change=\"clearError('content_type')\"\r\n            >\r\n              <option value=\"\">ËØ∑ÈÄâÊã©ÂÜÖÂÆπÁ±ªÂûã</option>\r\n              <option value=\"articles\">ÊñáÁ´†</option>\r\n              <option value=\"questions\">ÊèêÈóÆ</option>\r\n              <option value=\"experiences\">ÁªèÈ™åÂàÜ‰∫´</option>\r\n            </select>\r\n            <span v-if=\"errors.content_type\" class=\"form-error\">{{ errors.content_type }}</span>\r\n          </div>\r\n\r\n          <!-- Ê†áÈ¢ò -->\r\n          <div class=\"form-group\">\r\n            <label class=\"form-label\">Ê†áÈ¢ò <span class=\"required\">*</span></label>\r\n            <input\r\n              v-model=\"form.title\"\r\n              type=\"text\"\r\n              class=\"form-input\"\r\n              :class=\"{ 'error': errors.title }\"\r\n              placeholder=\"ËØ∑ËæìÂÖ•Ê†áÈ¢ò\"\r\n              maxlength=\"100\"\r\n              @input=\"clearError('title')\"\r\n            />\r\n            <div class=\"input-hint\">\r\n              <span class=\"char-count\">{{ form.title.length }}/100</span>\r\n            </div>\r\n            <span v-if=\"errors.title\" class=\"form-error\">{{ errors.title }}</span>\r\n          </div>\r\n\r\n          <!-- ÂÜÖÂÆπ -->\r\n          <div class=\"form-group\">\r\n            <label class=\"form-label\">ÂÜÖÂÆπ <span class=\"required\">*</span></label>\r\n            <textarea\r\n              v-model=\"form.content\"\r\n              class=\"form-textarea\"\r\n              :class=\"{ 'error': errors.content }\"\r\n              placeholder=\"ËØ∑ËæìÂÖ•ÂÜÖÂÆπ...\"\r\n              rows=\"12\"\r\n              @input=\"clearError('content')\"\r\n            ></textarea>\r\n            <div class=\"input-hint\">\r\n              <span class=\"char-count\">{{ form.content.length }}/5000</span>\r\n            </div>\r\n            <span v-if=\"errors.content\" class=\"form-error\">{{ errors.content }}</span>\r\n          </div>\r\n\r\n          <!-- ÂõæÁâá‰∏ä‰º†ÔºàÂèØÈÄâÔºâ -->\r\n          <div class=\"form-group\">\r\n            <label class=\"form-label\">ÂõæÁâáÔºàÂèØÈÄâÔºâ</label>\r\n            <div class=\"image-upload-section\">\r\n              <div class=\"image-preview-list\">\r\n                <div\r\n                  v-for=\"(image, idx) in imagePreviews\"\r\n                  :key=\"idx\"\r\n                  class=\"image-preview-item\"\r\n                >\r\n                  <img :src=\"image\" :alt=\"`È¢ÑËßà${idx + 1}`\" class=\"preview-image\" />\r\n                  <button\r\n                    type=\"button\"\r\n                    class=\"btn-remove-image\"\r\n                    @click=\"removeImage(idx)\"\r\n                  >\r\n                    √ó\r\n                  </button>\r\n                </div>\r\n              </div>\r\n              <label v-if=\"imagePreviews.length < 9\" class=\"upload-btn\">\r\n                <input\r\n                  type=\"file\"\r\n                  accept=\"image/*\"\r\n                  multiple\r\n                  @change=\"handleImageSelect\"\r\n                  class=\"file-input\"\r\n                />\r\n                <span class=\"upload-icon\">üì∑</span>\r\n                <span class=\"upload-text\">Ê∑ªÂä†ÂõæÁâá</span>\r\n              </label>\r\n            </div>\r\n            <div class=\"upload-hint\">\r\n              ÊúÄÂ§öÂèØ‰∏ä‰º† 9 Âº†ÂõæÁâáÔºåÊîØÊåÅ JPG„ÄÅPNG Ê†ºÂºè\r\n            </div>\r\n            <span v-if=\"errors.images\" class=\"form-error\">{{ errors.images }}</span>\r\n          </div>\r\n\r\n          <!-- Êèê‰∫§ÊåâÈíÆ -->\r\n          <div class=\"form-actions\">\r\n            <button type=\"button\" class=\"btn btn-cancel\" @click=\"goBack\">\r\n              ÂèñÊ∂à\r\n            </button>\r\n            <button type=\"submit\" class=\"btn btn-submit\" :disabled=\"submitting\">\r\n              {{ submitting ? 'ÂèëÂ∏É‰∏≠...' : 'ÂèëÂ∏ÉÂÜÖÂÆπ' }}\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </main>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, reactive, onMounted } from 'vue';\r\nimport { useRouter } from 'vue-router';\r\nimport { communityService } from '../api/community';\r\nimport logger from '../utils/logger';\r\n\r\nexport default {\r\n  name: 'ContentForm',\r\n  setup() {\r\n    const router = useRouter();\r\n    const submitting = ref(false);\r\n    const imagePreviews = ref([]);\r\n    const imageFiles = ref([]);\r\n\r\n    const form = reactive({\r\n      title: '',\r\n      content: '',\r\n      content_type: '',\r\n      images: []\r\n    });\r\n\r\n    const errors = reactive({\r\n      title: '',\r\n      content: '',\r\n      content_type: '',\r\n      images: ''\r\n    });\r\n\r\n    // Ëé∑ÂèñÁî®Êà∑‰ø°ÊÅØ\r\n    const getUserInfo = () => {\r\n      try {\r\n        const storedUser = localStorage.getItem('user');\r\n        return storedUser ? JSON.parse(storedUser) : null;\r\n      } catch (error) {\r\n        logger.error('CONTENT_FORM', 'Ëé∑ÂèñÁî®Êà∑‰ø°ÊÅØÂ§±Ë¥•', {}, error);\r\n        return null;\r\n      }\r\n    };\r\n\r\n    // Ê∏ÖÈô§ÈîôËØØ\r\n    const clearError = (field) => {\r\n      errors[field] = '';\r\n    };\r\n\r\n    // È™åËØÅË°®Âçï\r\n    const validateForm = () => {\r\n      let isValid = true;\r\n      errors.title = '';\r\n      errors.content = '';\r\n      errors.content_type = '';\r\n\r\n      if (!form.content_type) {\r\n        errors.content_type = 'ËØ∑ÈÄâÊã©ÂÜÖÂÆπÁ±ªÂûã';\r\n        isValid = false;\r\n      }\r\n\r\n      if (!form.title || !form.title.trim()) {\r\n        errors.title = 'ËØ∑ËæìÂÖ•Ê†áÈ¢ò';\r\n        isValid = false;\r\n      } else if (form.title.trim().length < 5) {\r\n        errors.title = 'Ê†áÈ¢òËá≥Â∞ëÈúÄË¶Å 5 ‰∏™Â≠óÁ¨¶';\r\n        isValid = false;\r\n      } else if (form.title.trim().length > 100) {\r\n        errors.title = 'Ê†áÈ¢ò‰∏çËÉΩË∂ÖËøá 100 ‰∏™Â≠óÁ¨¶';\r\n        isValid = false;\r\n      }\r\n\r\n      if (!form.content || !form.content.trim()) {\r\n        errors.content = 'ËØ∑ËæìÂÖ•ÂÜÖÂÆπ';\r\n        isValid = false;\r\n      } else if (form.content.trim().length < 10) {\r\n        errors.content = 'ÂÜÖÂÆπËá≥Â∞ëÈúÄË¶Å 10 ‰∏™Â≠óÁ¨¶';\r\n        isValid = false;\r\n      } else if (form.content.trim().length > 5000) {\r\n        errors.content = 'ÂÜÖÂÆπ‰∏çËÉΩË∂ÖËøá 5000 ‰∏™Â≠óÁ¨¶';\r\n        isValid = false;\r\n      }\r\n\r\n      logger.validation('ContentForm', isValid, errors);\r\n      return isValid;\r\n    };\r\n\r\n    // Â§ÑÁêÜÂõæÁâáÈÄâÊã©\r\n    const handleImageSelect = (event) => {\r\n      const files = Array.from(event.target.files);\r\n      const remainingSlots = 9 - imagePreviews.value.length;\r\n\r\n      if (files.length > remainingSlots) {\r\n        alert(`ÊúÄÂ§öÂè™ËÉΩ‰∏ä‰º† ${remainingSlots} Âº†ÂõæÁâá`);\r\n        files.splice(remainingSlots);\r\n      }\r\n\r\n      files.forEach((file) => {\r\n        if (!file.type.startsWith('image/')) {\r\n          alert('Âè™ËÉΩ‰∏ä‰º†ÂõæÁâáÊñá‰ª∂');\r\n          return;\r\n        }\r\n\r\n        if (file.size > 5 * 1024 * 1024) {\r\n          alert('ÂõæÁâáÂ§ßÂ∞è‰∏çËÉΩË∂ÖËøá 5MB');\r\n          return;\r\n        }\r\n\r\n        const reader = new FileReader();\r\n        reader.onload = (e) => {\r\n          imagePreviews.value.push(e.target.result);\r\n          imageFiles.value.push(file);\r\n        };\r\n        reader.readAsDataURL(file);\r\n      });\r\n\r\n      // Ê∏ÖÁ©∫ input ‰ª•‰æøÂÜçÊ¨°ÈÄâÊã©Áõ∏ÂêåÊñá‰ª∂Êó∂‰πüËÉΩËß¶Âèë change ‰∫ã‰ª∂\r\n      event.target.value = '';\r\n    };\r\n\r\n    // ÁßªÈô§ÂõæÁâá\r\n    const removeImage = (index) => {\r\n      imagePreviews.value.splice(index, 1);\r\n      imageFiles.value.splice(index, 1);\r\n    };\r\n\r\n    // Â§ÑÁêÜÂõæÁâá‰∏ä‰º†ÔºàËøôÈáåÁÆÄÂåñÂ§ÑÁêÜÔºåÂÆûÈôÖÂ∫îËØ•‰∏ä‰º†Âà∞ÊúçÂä°Âô®Ëé∑ÂèñURLÔºâ\r\n    const processImages = async () => {\r\n      // Âú®ÂÆûÈôÖÂ∫îÁî®‰∏≠ÔºåËøôÈáåÂ∫îËØ•Â∞ÜÂõæÁâá‰∏ä‰º†Âà∞ÊúçÂä°Âô®Ëé∑ÂèñURL\r\n      // ÁõÆÂâçÁÆÄÂåñÂ§ÑÁêÜÔºå‰ΩøÁî® base64 ÊàñËÄÖÊú¨Âú∞È¢ÑËßà\r\n      // Ê≥®ÊÑèÔºöbase64 ÊñπÂºè‰∏çÊé®ËçêÁî®‰∫éÁîü‰∫ßÁéØÂ¢ÉÔºåÂ∫îËØ•‰∏ä‰º†Âà∞OSSÁ≠âÂ≠òÂÇ®ÊúçÂä°\r\n      return imagePreviews.value;\r\n    };\r\n\r\n    // Êèê‰∫§Ë°®Âçï\r\n    const handleSubmit = async () => {\r\n      logger.userAction('SUBMIT_CONTENT', { contentType: form.content_type });\r\n\r\n      if (!validateForm()) {\r\n        logger.warn('CONTENT_FORM', 'Ë°®ÂçïÈ™åËØÅÂ§±Ë¥•');\r\n        return;\r\n      }\r\n\r\n      const userInfo = getUserInfo();\r\n      if (!userInfo || !userInfo.phone) {\r\n        alert('ËØ∑ÂÖàÁôªÂΩï');\r\n        router.push('/login');\r\n        return;\r\n      }\r\n\r\n      submitting.value = true;\r\n\r\n      try {\r\n        // Â§ÑÁêÜÂõæÁâá\r\n        const images = await processImages();\r\n\r\n        const contentData = {\r\n          title: form.title.trim(),\r\n          content: form.content.trim(),\r\n          content_type: form.content_type,\r\n          phone: userInfo.phone,\r\n          images: images\r\n        };\r\n\r\n        logger.info('CONTENT_FORM', 'Êèê‰∫§ÂÜÖÂÆπ', {\r\n          contentType: form.content_type,\r\n          title: form.title.substring(0, 20) + '...',\r\n          imageCount: images.length\r\n        });\r\n\r\n        const response = await communityService.publishContent(contentData);\r\n\r\n        logger.info('CONTENT_FORM', 'ÂÜÖÂÆπÂèëÂ∏ÉÊàêÂäü', {\r\n          contentId: response.data?.content_id\r\n        });\r\n\r\n        alert('ÂèëÂ∏ÉÊàêÂäüÔºÅ');\r\n        router.push('/community');\r\n      } catch (error) {\r\n        logger.error('CONTENT_FORM', 'ÂèëÂ∏ÉÂÜÖÂÆπÂ§±Ë¥•', {}, error);\r\n\r\n        if (error.code && error.message) {\r\n          // Â§ÑÁêÜÂ≠óÊÆµÁ∫ßÈîôËØØ\r\n          if (error.errors && error.errors.length > 0) {\r\n            error.errors.forEach((err) => {\r\n              if (err.field && Object.prototype.hasOwnProperty.call(errors, err.field)) {\r\n                errors[err.field] = err.message || error.message;\r\n              }\r\n            });\r\n          } else {\r\n            alert(error.message || 'ÂèëÂ∏ÉÂ§±Ë¥•ÔºåËØ∑Á®çÂêéÈáçËØï');\r\n          }\r\n        } else {\r\n          alert(error.message || 'ÂèëÂ∏ÉÂ§±Ë¥•ÔºåËØ∑Á®çÂêéÈáçËØï');\r\n        }\r\n      } finally {\r\n        submitting.value = false;\r\n      }\r\n    };\r\n\r\n    // ËøîÂõû\r\n    const goBack = () => {\r\n      if (confirm('Á°ÆÂÆöË¶ÅÁ¶ªÂºÄÂêóÔºüÊú™‰øùÂ≠òÁöÑÂÜÖÂÆπÂ∞Ü‰∏¢Â§±„ÄÇ')) {\r\n        router.push('/community');\r\n      }\r\n    };\r\n\r\n    onMounted(() => {\r\n      logger.lifecycle('ContentForm', 'mounted');\r\n    });\r\n\r\n    return {\r\n      form,\r\n      errors,\r\n      submitting,\r\n      imagePreviews,\r\n      clearError,\r\n      handleImageSelect,\r\n      removeImage,\r\n      handleSubmit,\r\n      goBack\r\n    };\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n@import '../assets/styles/theme.css';\r\n\r\n.content-form-container {\r\n  min-height: 100vh;\r\n  background: linear-gradient(135deg, #f5f3ff 0%, #ede9fe 100%);\r\n}\r\n\r\n/* È°∂ÈÉ®ÂØºËà™Ê†è */\r\n.header {\r\n  background: var(--white);\r\n  padding: 1rem 2rem;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  box-shadow: 0 2px 8px rgba(107, 70, 193, 0.1);\r\n  position: sticky;\r\n  top: 0;\r\n  z-index: 100;\r\n}\r\n\r\n.btn-back {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n  padding: 0.5rem 1rem;\r\n  background: transparent;\r\n  border: 1px solid var(--gray-300);\r\n  border-radius: 8px;\r\n  color: var(--gray-600);\r\n  font-size: 0.875rem;\r\n  cursor: pointer;\r\n  transition: all 0.2s;\r\n}\r\n\r\n.btn-back:hover {\r\n  background: var(--gray-100);\r\n  border-color: var(--primary);\r\n  color: var(--primary);\r\n}\r\n\r\n.header-title {\r\n  font-size: 1.5rem;\r\n  font-weight: 700;\r\n  color: var(--primary);\r\n  margin: 0;\r\n}\r\n\r\n.header-placeholder {\r\n  width: 120px;\r\n}\r\n\r\n/* ‰∏ªÂÜÖÂÆπ */\r\n.main-content {\r\n  max-width: 900px;\r\n  margin: 0 auto;\r\n  padding: 2rem;\r\n}\r\n\r\n.form-wrapper {\r\n  background: var(--white);\r\n  padding: 2rem;\r\n  border-radius: 16px;\r\n  box-shadow: 0 4px 12px rgba(107, 70, 193, 0.08);\r\n}\r\n\r\n.content-form {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 1.5rem;\r\n}\r\n\r\n.form-group {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 0.5rem;\r\n}\r\n\r\n.form-label {\r\n  font-size: 1rem;\r\n  font-weight: 600;\r\n  color: #1a202c;\r\n}\r\n\r\n.required {\r\n  color: var(--error);\r\n}\r\n\r\n.form-input,\r\n.form-textarea {\r\n  width: 100%;\r\n  padding: 0.875rem;\r\n  border: 2px solid var(--gray-300);\r\n  border-radius: 8px;\r\n  font-size: 1rem;\r\n  font-family: inherit;\r\n  transition: all 0.2s;\r\n}\r\n\r\n.form-input:focus,\r\n.form-textarea:focus {\r\n  outline: none;\r\n  border-color: var(--primary);\r\n  box-shadow: 0 0 0 3px rgba(107, 70, 193, 0.1);\r\n}\r\n\r\n.form-input.error,\r\n.form-textarea.error {\r\n  border-color: var(--error);\r\n}\r\n\r\n.form-textarea {\r\n  resize: vertical;\r\n  line-height: 1.6;\r\n}\r\n\r\n.input-hint {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n}\r\n\r\n.char-count {\r\n  color: var(--gray-500);\r\n  font-size: 0.875rem;\r\n}\r\n\r\n.form-error {\r\n  color: var(--error);\r\n  font-size: 0.875rem;\r\n}\r\n\r\n/* ÂõæÁâá‰∏ä‰º† */\r\n.image-upload-section {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 1rem;\r\n}\r\n\r\n.image-preview-list {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 1rem;\r\n}\r\n\r\n.image-preview-item {\r\n  position: relative;\r\n  width: 120px;\r\n  height: 120px;\r\n  border-radius: 8px;\r\n  overflow: hidden;\r\n  border: 2px solid var(--gray-300);\r\n}\r\n\r\n.preview-image {\r\n  width: 100%;\r\n  height: 100%;\r\n  object-fit: cover;\r\n}\r\n\r\n.btn-remove-image {\r\n  position: absolute;\r\n  top: 0.25rem;\r\n  right: 0.25rem;\r\n  width: 28px;\r\n  height: 28px;\r\n  background: rgba(0, 0, 0, 0.6);\r\n  border: none;\r\n  border-radius: 50%;\r\n  color: var(--white);\r\n  font-size: 1.25rem;\r\n  cursor: pointer;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  transition: all 0.2s;\r\n}\r\n\r\n.btn-remove-image:hover {\r\n  background: rgba(0, 0, 0, 0.8);\r\n}\r\n\r\n.upload-btn {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  width: 120px;\r\n  height: 120px;\r\n  border: 2px dashed var(--gray-300);\r\n  border-radius: 8px;\r\n  cursor: pointer;\r\n  transition: all 0.2s;\r\n  background: var(--gray-100);\r\n}\r\n\r\n.upload-btn:hover {\r\n  border-color: var(--primary);\r\n  background: var(--gray-200);\r\n}\r\n\r\n.file-input {\r\n  display: none;\r\n}\r\n\r\n.upload-icon {\r\n  font-size: 2rem;\r\n  margin-bottom: 0.5rem;\r\n}\r\n\r\n.upload-text {\r\n  color: var(--gray-600);\r\n  font-size: 0.875rem;\r\n}\r\n\r\n.upload-hint {\r\n  color: var(--gray-500);\r\n  font-size: 0.875rem;\r\n  margin-top: 0.5rem;\r\n}\r\n\r\n/* Ë°®ÂçïÊìç‰Ωú */\r\n.form-actions {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  gap: 1rem;\r\n  padding-top: 1rem;\r\n  border-top: 1px solid var(--gray-200);\r\n}\r\n\r\n.btn {\r\n  padding: 0.875rem 2rem;\r\n  border: none;\r\n  border-radius: 8px;\r\n  font-size: 1rem;\r\n  font-weight: 600;\r\n  cursor: pointer;\r\n  transition: all 0.3s;\r\n}\r\n\r\n.btn-cancel {\r\n  background: var(--gray-200);\r\n  color: var(--gray-600);\r\n}\r\n\r\n.btn-cancel:hover {\r\n  background: var(--gray-300);\r\n}\r\n\r\n.btn-submit {\r\n  background: linear-gradient(135deg, var(--primary), var(--primary-light));\r\n  color: var(--white);\r\n  box-shadow: 0 4px 12px rgba(107, 70, 193, 0.3);\r\n}\r\n\r\n.btn-submit:hover:not(:disabled) {\r\n  transform: translateY(-2px);\r\n  box-shadow: 0 6px 16px rgba(107, 70, 193, 0.4);\r\n}\r\n\r\n.btn-submit:disabled {\r\n  opacity: 0.6;\r\n  cursor: not-allowed;\r\n}\r\n\r\n/* ÂìçÂ∫îÂºèËÆæËÆ° */\r\n@media (max-width: 768px) {\r\n  .header {\r\n    padding: 1rem;\r\n  }\r\n\r\n  .header-title {\r\n    font-size: 1.25rem;\r\n  }\r\n\r\n  .main-content {\r\n    padding: 1rem;\r\n  }\r\n\r\n  .form-wrapper {\r\n    padding: 1.5rem;\r\n  }\r\n\r\n  .image-preview-item,\r\n  .upload-btn {\r\n    width: 100px;\r\n    height: 100px;\r\n  }\r\n}\r\n</style>\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}