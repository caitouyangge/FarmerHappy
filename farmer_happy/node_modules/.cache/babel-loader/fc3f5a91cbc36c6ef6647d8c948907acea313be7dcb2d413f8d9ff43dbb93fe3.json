{"ast":null,"code":"import { ref, reactive, computed, watch, onMounted } from 'vue';\nimport { productService } from '../api/product';\nimport logger from '../utils/logger';\nexport default {\n  name: 'ProductForm',\n  props: {\n    product: {\n      type: Object,\n      default: null\n    },\n    isEdit: {\n      type: Boolean,\n      default: false\n    }\n  },\n  emits: ['close', 'success'],\n  setup(props, {\n    emit\n  }) {\n    const loading = ref(false);\n    const userInfo = ref({});\n\n    // 表单数据\n    const form = reactive({\n      title: '',\n      category: '',\n      price: '',\n      stock: '',\n      specification: ''\n    });\n\n    // 表单验证错误\n    const errors = reactive({\n      title: '',\n      category: '',\n      price: '',\n      stock: '',\n      specification: ''\n    });\n\n    // 获取用户信息\n    onMounted(() => {\n      const storedUser = localStorage.getItem('user');\n      if (storedUser) {\n        try {\n          userInfo.value = JSON.parse(storedUser);\n        } catch (error) {\n          logger.error('PRODUCT_FORM', '解析用户信息失败', {}, error);\n        }\n      }\n\n      // 如果是编辑模式，填充表单数据\n      if (props.isEdit && props.product) {\n        Object.assign(form, {\n          title: props.product.title || '',\n          category: props.product.category || '',\n          price: props.product.price || '',\n          stock: props.product.stock || '',\n          specification: props.product.specification || ''\n        });\n      }\n    });\n\n    // 表单验证\n    const validateForm = () => {\n      logger.debug('PRODUCT_FORM', '开始验证表单');\n      let isValid = true;\n\n      // 清空错误信息\n      Object.keys(errors).forEach(key => {\n        errors[key] = '';\n      });\n\n      // 验证必填字段\n      if (!form.title.trim()) {\n        errors.title = '请输入产品标题';\n        isValid = false;\n      } else if (form.title.length > 100) {\n        errors.title = '产品标题不能超过100个字符';\n        isValid = false;\n      }\n      if (!form.category) {\n        errors.category = '请选择产品分类';\n        isValid = false;\n      }\n\n      // 验证价格\n      if (!form.price || isNaN(form.price) || form.price <= 0) {\n        errors.price = '请输入有效的价格';\n        isValid = false;\n      }\n\n      // 验证库存\n      if (form.stock === '' || isNaN(form.stock) || form.stock < 0) {\n        errors.stock = '请输入有效的库存数量';\n        isValid = false;\n      }\n\n      // 验证规格描述\n      if (!form.specification.trim()) {\n        errors.specification = '请输入商品规格描述';\n        isValid = false;\n      } else if (form.specification.length > 200) {\n        errors.specification = '规格描述不能超过200个字符';\n        isValid = false;\n      }\n      logger.validation('ProductForm', isValid, errors);\n      return isValid;\n    };\n\n    // 提交表单\n    const handleSubmit = async () => {\n      logger.userAction('PRODUCT_FORM_SUBMIT', {\n        isEdit: props.isEdit,\n        productId: props.product?.product_id\n      });\n      if (!validateForm()) {\n        logger.warn('PRODUCT_FORM', '表单验证失败');\n        return;\n      }\n      loading.value = true;\n      try {\n        // 准备提交数据\n        const submitData = {\n          title: form.title.trim(),\n          category: form.category,\n          price: parseFloat(form.price),\n          stock: parseInt(form.stock),\n          specification: form.specification.trim(),\n          phone: userInfo.value.phone\n        };\n        logger.info('PRODUCT_FORM', '开始提交产品数据', {\n          isEdit: props.isEdit,\n          data: submitData\n        });\n        let response;\n        if (props.isEdit) {\n          response = await productService.updateProduct(props.product.product_id, submitData);\n        } else {\n          response = await productService.createProduct(submitData);\n        }\n        logger.info('PRODUCT_FORM', '产品操作成功', {\n          isEdit: props.isEdit,\n          productId: response.data?.product_id\n        });\n        emit('success');\n      } catch (error) {\n        logger.error('PRODUCT_FORM', '产品操作失败', {\n          isEdit: props.isEdit,\n          errorMessage: error.message || error\n        }, error);\n\n        // 处理验证错误\n        if (error.errors && Array.isArray(error.errors)) {\n          error.errors.forEach(err => {\n            if (err.field && Object.prototype.hasOwnProperty.call(errors, err.field)) {\n              errors[err.field] = err.message;\n            }\n          });\n        } else {\n          alert('操作失败：' + (error.message || error));\n        }\n      } finally {\n        loading.value = false;\n      }\n    };\n\n    // 关闭弹窗\n    const handleClose = () => {\n      logger.userAction('PRODUCT_FORM_CLOSE', {\n        isEdit: props.isEdit\n      });\n      emit('close');\n    };\n\n    // 点击遮罩层关闭\n    const handleOverlayClick = event => {\n      if (event.target === event.currentTarget) {\n        handleClose();\n      }\n    };\n    return {\n      loading,\n      form,\n      errors,\n      handleSubmit,\n      handleClose,\n      handleOverlayClick\n    };\n  }\n};","map":{"version":3,"names":["ref","reactive","computed","watch","onMounted","productService","logger","name","props","product","type","Object","default","isEdit","Boolean","emits","setup","emit","loading","userInfo","form","title","category","price","stock","specification","errors","storedUser","localStorage","getItem","value","JSON","parse","error","assign","validateForm","debug","isValid","keys","forEach","key","trim","length","isNaN","validation","handleSubmit","userAction","productId","product_id","warn","submitData","parseFloat","parseInt","phone","info","data","response","updateProduct","createProduct","errorMessage","message","Array","isArray","err","field","prototype","hasOwnProperty","call","alert","handleClose","handleOverlayClick","event","target","currentTarget"],"sources":["D:\\STUDY\\FarmerHappy\\farmer_happy\\src\\components\\ProductForm.vue"],"sourcesContent":["<template>\r\n  <div class=\"modal-overlay\" @click=\"handleOverlayClick\">\r\n    <div class=\"modal-container\" @click.stop>\r\n      <div class=\"modal-header\">\r\n        <h2 class=\"modal-title\">{{ isEdit ? '编辑农产品' : '发布农产品' }}</h2>\r\n        <button class=\"close-btn\" @click=\"handleClose\">\r\n          <span class=\"close-icon\">×</span>\r\n        </button>\r\n      </div>\r\n\r\n      <form @submit.prevent=\"handleSubmit\" class=\"modal-form\">\r\n        <div class=\"form-content\">\r\n          <!-- 基本信息 -->\r\n          <div class=\"form-section\">\r\n            <h3 class=\"section-title\">基本信息</h3>\r\n            \r\n            <div class=\"form-group\">\r\n              <label class=\"form-label required\">产品标题</label>\r\n              <input\r\n                v-model=\"form.title\"\r\n                type=\"text\"\r\n                class=\"form-input\"\r\n                :class=\"{ 'error': errors.title }\"\r\n                placeholder=\"请输入产品标题\"\r\n                maxlength=\"100\"\r\n              />\r\n              <span v-if=\"errors.title\" class=\"form-error\">{{ errors.title }}</span>\r\n            </div>\r\n\r\n             <div class=\"form-group\">\r\n               <label class=\"form-label required\">产品分类</label>\r\n               <select\r\n                 v-model=\"form.category\"\r\n                 class=\"form-input\"\r\n                 :class=\"{ 'error': errors.category }\"\r\n               >\r\n                 <option value=\"\">请选择产品分类</option>\r\n                 <option value=\"vegetables\">蔬菜</option>\r\n                 <option value=\"fruits\">水果</option>\r\n                 <option value=\"grains\">粮食</option>\r\n               </select>\r\n               <span v-if=\"errors.category\" class=\"form-error\">{{ errors.category }}</span>\r\n             </div>\r\n\r\n          </div>\r\n\r\n          <!-- 价格和库存 -->\r\n          <div class=\"form-section\">\r\n            <h3 class=\"section-title\">价格和库存</h3>\r\n            \r\n            <div class=\"form-row\">\r\n              <div class=\"form-group\">\r\n                <label class=\"form-label\">价格 (元/斤)</label>\r\n                <input\r\n                  v-model=\"form.price\"\r\n                  type=\"number\"\r\n                  class=\"form-input\"\r\n                  :class=\"{ 'error': errors.price }\"\r\n                  placeholder=\"0.00\"\r\n                  step=\"0.01\"\r\n                  min=\"0\"\r\n                />\r\n                <span v-if=\"errors.price\" class=\"form-error\">{{ errors.price }}</span>\r\n              </div>\r\n\r\n              <div class=\"form-group\">\r\n                <label class=\"form-label\">库存数量(斤)</label>\r\n                <input\r\n                  v-model=\"form.stock\"\r\n                  type=\"number\"\r\n                  class=\"form-input\"\r\n                  :class=\"{ 'error': errors.stock }\"\r\n                  placeholder=\"0\"\r\n                  min=\"0\"\r\n                />\r\n                <span v-if=\"errors.stock\" class=\"form-error\">{{ errors.stock }}</span>\r\n              </div>\r\n            </div>\r\n\r\n          </div>\r\n\r\n          <!-- 产品规格 -->\r\n          <div class=\"form-section\">\r\n            <h3 class=\"section-title\">产品规格</h3>\r\n            \r\n             <div class=\"form-group\">\r\n               <label class=\"form-label required\">商品规格描述</label>\r\n               <textarea\r\n                 v-model=\"form.specification\"\r\n                 class=\"form-textarea\"\r\n                 :class=\"{ 'error': errors.specification }\"\r\n                 placeholder=\"请详细描述商品的规格、重量、尺寸等具体信息\"\r\n                 rows=\"3\"\r\n                 maxlength=\"200\"\r\n               ></textarea>\r\n               <span v-if=\"errors.specification\" class=\"form-error\">{{ errors.specification }}</span>\r\n             </div>\r\n          </div>\r\n\r\n        </div>\r\n\r\n        <div class=\"modal-footer\">\r\n          <button type=\"button\" class=\"btn-cancel\" @click=\"handleClose\">\r\n            取消\r\n          </button>\r\n          <button type=\"submit\" class=\"btn-submit\" :disabled=\"loading\">\r\n            {{ loading ? '保存中...' : (isEdit ? '更新' : '发布') }}\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, reactive, computed, watch, onMounted } from 'vue';\r\nimport { productService } from '../api/product';\r\nimport logger from '../utils/logger';\r\n\r\nexport default {\r\n  name: 'ProductForm',\r\n  props: {\r\n    product: {\r\n      type: Object,\r\n      default: null\r\n    },\r\n    isEdit: {\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  },\r\n  emits: ['close', 'success'],\r\n  setup(props, { emit }) {\r\n    const loading = ref(false);\r\n    const userInfo = ref({});\r\n\r\n     // 表单数据\r\n     const form = reactive({\r\n       title: '',\r\n       category: '',\r\n       price: '',\r\n       stock: '',\r\n       specification: ''\r\n     });\r\n\r\n     // 表单验证错误\r\n     const errors = reactive({\r\n       title: '',\r\n       category: '',\r\n       price: '',\r\n       stock: '',\r\n       specification: ''\r\n     });\r\n\r\n    // 获取用户信息\r\n    onMounted(() => {\r\n      const storedUser = localStorage.getItem('user');\r\n      if (storedUser) {\r\n        try {\r\n          userInfo.value = JSON.parse(storedUser);\r\n        } catch (error) {\r\n          logger.error('PRODUCT_FORM', '解析用户信息失败', {}, error);\r\n        }\r\n      }\r\n\r\n       // 如果是编辑模式，填充表单数据\r\n       if (props.isEdit && props.product) {\r\n         Object.assign(form, {\r\n           title: props.product.title || '',\r\n           category: props.product.category || '',\r\n           price: props.product.price || '',\r\n           stock: props.product.stock || '',\r\n           specification: props.product.specification || ''\r\n         });\r\n       }\r\n    });\r\n\r\n    // 表单验证\r\n    const validateForm = () => {\r\n      logger.debug('PRODUCT_FORM', '开始验证表单');\r\n      let isValid = true;\r\n      \r\n      // 清空错误信息\r\n      Object.keys(errors).forEach(key => {\r\n        errors[key] = '';\r\n      });\r\n\r\n      // 验证必填字段\r\n      if (!form.title.trim()) {\r\n        errors.title = '请输入产品标题';\r\n        isValid = false;\r\n      } else if (form.title.length > 100) {\r\n        errors.title = '产品标题不能超过100个字符';\r\n        isValid = false;\r\n      }\r\n\r\n      if (!form.category) {\r\n        errors.category = '请选择产品分类';\r\n        isValid = false;\r\n      }\r\n\r\n      // 验证价格\r\n      if (!form.price || isNaN(form.price) || form.price <= 0) {\r\n        errors.price = '请输入有效的价格';\r\n        isValid = false;\r\n      }\r\n\r\n      // 验证库存\r\n      if (form.stock === '' || isNaN(form.stock) || form.stock < 0) {\r\n        errors.stock = '请输入有效的库存数量';\r\n        isValid = false;\r\n      }\r\n\r\n       // 验证规格描述\r\n       if (!form.specification.trim()) {\r\n         errors.specification = '请输入商品规格描述';\r\n         isValid = false;\r\n       } else if (form.specification.length > 200) {\r\n         errors.specification = '规格描述不能超过200个字符';\r\n         isValid = false;\r\n       }\r\n\r\n       logger.validation('ProductForm', isValid, errors);\r\n       return isValid;\r\n    };\r\n\r\n    // 提交表单\r\n    const handleSubmit = async () => {\r\n      logger.userAction('PRODUCT_FORM_SUBMIT', { \r\n        isEdit: props.isEdit,\r\n        productId: props.product?.product_id \r\n      });\r\n\r\n      if (!validateForm()) {\r\n        logger.warn('PRODUCT_FORM', '表单验证失败');\r\n        return;\r\n      }\r\n\r\n      loading.value = true;\r\n      try {\r\n         // 准备提交数据\r\n         const submitData = {\r\n           title: form.title.trim(),\r\n           category: form.category,\r\n           price: parseFloat(form.price),\r\n           stock: parseInt(form.stock),\r\n           specification: form.specification.trim(),\r\n           phone: userInfo.value.phone\r\n         };\r\n\r\n        logger.info('PRODUCT_FORM', '开始提交产品数据', { \r\n          isEdit: props.isEdit,\r\n          data: submitData \r\n        });\r\n\r\n        let response;\r\n        if (props.isEdit) {\r\n          response = await productService.updateProduct(props.product.product_id, submitData);\r\n        } else {\r\n          response = await productService.createProduct(submitData);\r\n        }\r\n\r\n        logger.info('PRODUCT_FORM', '产品操作成功', { \r\n          isEdit: props.isEdit,\r\n          productId: response.data?.product_id \r\n        });\r\n\r\n        emit('success');\r\n      } catch (error) {\r\n        logger.error('PRODUCT_FORM', '产品操作失败', {\r\n          isEdit: props.isEdit,\r\n          errorMessage: error.message || error\r\n        }, error);\r\n\r\n        // 处理验证错误\r\n        if (error.errors && Array.isArray(error.errors)) {\r\n          error.errors.forEach(err => {\r\n            if (err.field && Object.prototype.hasOwnProperty.call(errors, err.field)) {\r\n              errors[err.field] = err.message;\r\n            }\r\n          });\r\n        } else {\r\n          alert('操作失败：' + (error.message || error));\r\n        }\r\n      } finally {\r\n        loading.value = false;\r\n      }\r\n    };\r\n\r\n    // 关闭弹窗\r\n    const handleClose = () => {\r\n      logger.userAction('PRODUCT_FORM_CLOSE', { isEdit: props.isEdit });\r\n      emit('close');\r\n    };\r\n\r\n    // 点击遮罩层关闭\r\n    const handleOverlayClick = (event) => {\r\n      if (event.target === event.currentTarget) {\r\n        handleClose();\r\n      }\r\n    };\r\n\r\n    return {\r\n      loading,\r\n      form,\r\n      errors,\r\n      handleSubmit,\r\n      handleClose,\r\n      handleOverlayClick\r\n    };\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n@import '../assets/styles/theme.css';\r\n\r\n.modal-overlay {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background: rgba(0, 0, 0, 0.5);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  z-index: 1000;\r\n  padding: 1rem;\r\n}\r\n\r\n.modal-container {\r\n  background: var(--white);\r\n  border-radius: 16px;\r\n  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);\r\n  width: 100%;\r\n  max-width: 800px;\r\n  max-height: 90vh;\r\n  overflow: hidden;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.modal-header {\r\n  padding: 1.5rem 2rem;\r\n  border-bottom: 1px solid var(--gray-200);\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.modal-title {\r\n  font-size: 1.25rem;\r\n  font-weight: 600;\r\n  color: var(--primary);\r\n  margin: 0;\r\n}\r\n\r\n.close-btn {\r\n  width: 32px;\r\n  height: 32px;\r\n  border: none;\r\n  background: transparent;\r\n  border-radius: 50%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  cursor: pointer;\r\n  transition: background 0.2s;\r\n}\r\n\r\n.close-btn:hover {\r\n  background: var(--gray-100);\r\n}\r\n\r\n.close-icon {\r\n  font-size: 1.5rem;\r\n  color: var(--gray-500);\r\n}\r\n\r\n.modal-form {\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  overflow: hidden;\r\n}\r\n\r\n.form-content {\r\n  flex: 1;\r\n  overflow-y: auto;\r\n  padding: 2rem;\r\n}\r\n\r\n.form-section {\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n.section-title {\r\n  font-size: 1rem;\r\n  font-weight: 600;\r\n  color: #1a202c;\r\n  margin: 0 0 1rem 0;\r\n  padding-bottom: 0.5rem;\r\n  border-bottom: 2px solid var(--primary-light);\r\n}\r\n\r\n.form-group {\r\n  margin-bottom: 1.5rem;\r\n}\r\n\r\n.form-row {\r\n  display: grid;\r\n  grid-template-columns: 1fr 1fr;\r\n  gap: 1rem;\r\n}\r\n\r\n.form-label {\r\n  display: block;\r\n  margin-bottom: 0.5rem;\r\n  color: var(--gray-600);\r\n  font-size: 0.875rem;\r\n  font-weight: 500;\r\n}\r\n\r\n.form-label.required::after {\r\n  content: ' *';\r\n  color: var(--error);\r\n}\r\n\r\n.form-input, .form-textarea {\r\n  width: 100%;\r\n  padding: 0.75rem;\r\n  border: 1px solid var(--gray-300);\r\n  border-radius: 8px;\r\n  font-size: 0.875rem;\r\n  transition: all 0.2s;\r\n  background: var(--white);\r\n}\r\n\r\n.form-input:focus, .form-textarea:focus {\r\n  outline: none;\r\n  border-color: var(--primary);\r\n  box-shadow: 0 0 0 3px rgba(107, 70, 193, 0.1);\r\n}\r\n\r\n.form-input.error, .form-textarea.error {\r\n  border-color: var(--error);\r\n}\r\n\r\n.form-textarea {\r\n  resize: vertical;\r\n  min-height: 100px;\r\n}\r\n\r\n .form-error {\r\n   display: block;\r\n   color: var(--error);\r\n   font-size: 0.75rem;\r\n   margin-top: 0.25rem;\r\n }\r\n\r\n .unit-display {\r\n   display: flex;\r\n   align-items: center;\r\n   gap: 0.5rem;\r\n   padding: 0.75rem;\r\n   background: var(--gray-100);\r\n   border-radius: 8px;\r\n   border: 1px solid var(--gray-300);\r\n }\r\n\r\n .unit-text {\r\n   font-size: 0.875rem;\r\n   font-weight: 500;\r\n   color: #1a202c;\r\n }\r\n\r\n .unit-note {\r\n   font-size: 0.75rem;\r\n   color: var(--gray-500);\r\n }\r\n\r\n.radio-group {\r\n  display: flex;\r\n  gap: 1rem;\r\n}\r\n\r\n.radio-item {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n  cursor: pointer;\r\n}\r\n\r\n.radio-input {\r\n  accent-color: var(--primary);\r\n}\r\n\r\n.radio-label {\r\n  font-size: 0.875rem;\r\n  color: var(--gray-600);\r\n}\r\n\r\n.modal-footer {\r\n  padding: 1.5rem 2rem;\r\n  border-top: 1px solid var(--gray-200);\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  gap: 1rem;\r\n}\r\n\r\n.btn-cancel, .btn-submit {\r\n  padding: 0.75rem 1.5rem;\r\n  border: none;\r\n  border-radius: 8px;\r\n  font-size: 0.875rem;\r\n  font-weight: 500;\r\n  cursor: pointer;\r\n  transition: all 0.2s;\r\n}\r\n\r\n.btn-cancel {\r\n  background: var(--gray-200);\r\n  color: var(--gray-600);\r\n}\r\n\r\n.btn-cancel:hover {\r\n  background: var(--gray-300);\r\n}\r\n\r\n.btn-submit {\r\n  background: var(--primary);\r\n  color: var(--white);\r\n}\r\n\r\n.btn-submit:hover:not(:disabled) {\r\n  background: var(--primary-dark);\r\n}\r\n\r\n.btn-submit:disabled {\r\n  opacity: 0.6;\r\n  cursor: not-allowed;\r\n}\r\n\r\n/* 响应式设计 */\r\n@media (max-width: 768px) {\r\n  .modal-overlay {\r\n    padding: 0.5rem;\r\n  }\r\n\r\n  .modal-container {\r\n    max-height: 95vh;\r\n  }\r\n\r\n  .modal-header {\r\n    padding: 1rem;\r\n  }\r\n\r\n  .form-content {\r\n    padding: 1rem;\r\n  }\r\n\r\n  .form-row {\r\n    grid-template-columns: 1fr;\r\n  }\r\n\r\n  .modal-footer {\r\n    padding: 1rem;\r\n    flex-direction: column;\r\n  }\r\n\r\n  .btn-cancel, .btn-submit {\r\n    width: 100%;\r\n  }\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}