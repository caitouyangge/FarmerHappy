{"ast":null,"code":"import { ref, computed, onMounted, reactive } from 'vue';\nimport { useRouter } from 'vue-router';\nimport { productService } from '../api/product';\nimport logger from '../utils/logger';\nimport ProductCard from '../components/ProductCard.vue';\nimport ProductForm from '../components/ProductForm.vue';\nimport ProductDetail from '../components/ProductDetail.vue';\nimport BatchActionModal from '../components/BatchActionModal.vue';\nimport OrderForm from '../components/OrderForm.vue';\nexport default {\n  name: 'ProductList',\n  components: {\n    ProductCard,\n    ProductForm,\n    ProductDetail,\n    BatchActionModal,\n    OrderForm\n  },\n  setup() {\n    const router = useRouter();\n    const userInfo = ref({});\n    const products = ref([]);\n    const loading = ref(false);\n    const searchKeyword = ref('');\n    const statusFilter = ref('');\n    const selectedProducts = ref([]);\n    const showCreateForm = ref(false);\n    const showProductDetail = ref(false);\n    const showBatchModal = ref(false);\n    const showOrderForm = ref(false);\n    const editingProduct = ref(null);\n    const viewingProductId = ref(null);\n    const purchasingProduct = ref(null);\n\n    // ÂàÜÈ°µÁõ∏ÂÖ≥\n    const currentPage = ref(1);\n    const pageSize = ref(12);\n    const totalCount = ref(0);\n    const totalPages = computed(() => {\n      if (totalCount.value === 0) return 0;\n      return Math.ceil(totalCount.value / pageSize.value) || 1;\n    });\n\n    // Áî®Êà∑Á±ªÂûãÂà§Êñ≠\n    const isFarmer = computed(() => userInfo.value.userType === 'farmer');\n\n    // Áî®Êà∑ËßíËâ≤ÊñáÊú¨\n    const userRoleText = computed(() => {\n      const roleMap = {\n        farmer: 'ÂÜúÊà∑',\n        buyer: '‰π∞ÂÆ∂',\n        expert: 'ÊäÄÊúØ‰∏ìÂÆ∂',\n        bank: 'Èì∂Ë°å'\n      };\n      return roleMap[userInfo.value.userType] || 'Êó†';\n    });\n\n    // Ëé∑ÂèñÁî®Êà∑‰ø°ÊÅØ\n    onMounted(() => {\n      const storedUser = localStorage.getItem('user');\n      if (storedUser) {\n        try {\n          userInfo.value = JSON.parse(storedUser);\n          logger.info('PRODUCT_LIST', 'Âä†ËΩΩÁî®Êà∑‰ø°ÊÅØÊàêÂäü', {\n            userType: userInfo.value.userType\n          });\n          loadProducts();\n        } catch (error) {\n          logger.error('PRODUCT_LIST', 'Ëß£ÊûêÁî®Êà∑‰ø°ÊÅØÂ§±Ë¥•', {}, error);\n          router.push('/login');\n        }\n      } else {\n        logger.warn('PRODUCT_LIST', 'Êú™ÊâæÂà∞Áî®Êà∑‰ø°ÊÅØÔºåË∑≥ËΩ¨Âà∞ÁôªÂΩïÈ°µ');\n        router.push('/login');\n      }\n    });\n\n    // Âä†ËΩΩ‰∫ßÂìÅÂàóË°®\n    const loadProducts = async () => {\n      loading.value = true;\n      try {\n        logger.info('PRODUCT_LIST', 'ÂºÄÂßãÂä†ËΩΩ‰∫ßÂìÅÂàóË°®', {\n          phone: userInfo.value.phone,\n          status: statusFilter.value,\n          title: searchKeyword.value,\n          page: currentPage.value\n        });\n        const response = await productService.getProductList(userInfo.value.phone, statusFilter.value || null, searchKeyword.value || null);\n        products.value = response.list || [];\n        totalCount.value = response.total_count || 0;\n        logger.info('PRODUCT_LIST', '‰∫ßÂìÅÂàóË°®Âä†ËΩΩÊàêÂäü', {\n          count: products.value.length,\n          total: totalCount.value\n        });\n      } catch (error) {\n        logger.error('PRODUCT_LIST', 'Âä†ËΩΩ‰∫ßÂìÅÂàóË°®Â§±Ë¥•', {\n          errorMessage: error.message || error\n        }, error);\n        products.value = [];\n        totalCount.value = 0;\n      } finally {\n        loading.value = false;\n      }\n    };\n\n    // ËøîÂõû‰∏ä‰∏ÄÈ°µ\n    const goBack = () => {\n      logger.userAction('BACK_CLICK', {\n        from: 'product_list'\n      });\n      router.push('/home');\n    };\n\n    // ÊêúÁ¥¢Â§ÑÁêÜ\n    const handleSearch = () => {\n      logger.userAction('SEARCH_CLICK', {\n        keyword: searchKeyword.value\n      });\n      currentPage.value = 1;\n      loadProducts();\n    };\n\n    // Á≠õÈÄâÂ§ÑÁêÜ\n    const handleFilterChange = () => {\n      logger.userAction('FILTER_CHANGE', {\n        status: statusFilter.value\n      });\n      currentPage.value = 1;\n      loadProducts();\n    };\n\n    // ÂàÜÈ°µÂ§ÑÁêÜ\n    const handlePageChange = page => {\n      if (page >= 1 && page <= totalPages.value) {\n        logger.userAction('PAGE_CHANGE', {\n          page\n        });\n        currentPage.value = page;\n        loadProducts();\n      }\n    };\n\n    // ‰∫ßÂìÅÈÄâÊã©Â§ÑÁêÜ\n    const handleProductSelect = (productId, selected) => {\n      if (selected) {\n        selectedProducts.value.push(productId);\n      } else {\n        const index = selectedProducts.value.indexOf(productId);\n        if (index > -1) {\n          selectedProducts.value.splice(index, 1);\n        }\n      }\n      logger.userAction('PRODUCT_SELECT', {\n        productId,\n        selected\n      });\n    };\n\n    // Êü•Áúã‰∫ßÂìÅËØ¶ÊÉÖ\n    const handleViewProduct = productId => {\n      logger.userAction('VIEW_PRODUCT', {\n        productId\n      });\n      viewingProductId.value = productId;\n      showProductDetail.value = true;\n    };\n\n    // ÁºñËæë‰∫ßÂìÅ\n    const handleEditProduct = product => {\n      logger.userAction('EDIT_PRODUCT', {\n        productId: product.product_id\n      });\n      editingProduct.value = product;\n      showCreateForm.value = true;\n    };\n\n    // Âà†Èô§‰∫ßÂìÅ\n    const handleDeleteProduct = async productId => {\n      if (!confirm('Á°ÆÂÆöË¶ÅÂà†Èô§Ëøô‰∏™‰∫ßÂìÅÂêóÔºü')) {\n        return;\n      }\n      try {\n        logger.userAction('DELETE_PRODUCT', {\n          productId\n        });\n        await productService.deleteProduct(productId, userInfo.value.phone);\n        logger.info('PRODUCT_LIST', '‰∫ßÂìÅÂà†Èô§ÊàêÂäü', {\n          productId\n        });\n        loadProducts();\n      } catch (error) {\n        logger.error('PRODUCT_LIST', 'Âà†Èô§‰∫ßÂìÅÂ§±Ë¥•', {\n          productId,\n          errorMessage: error.message || error\n        }, error);\n        alert('Âà†Èô§Â§±Ë¥•Ôºö' + (error.message || error));\n      }\n    };\n\n    // ‰∏äÊû∂‰∫ßÂìÅ\n    const handleOnShelf = async productId => {\n      try {\n        logger.userAction('ON_SHELF_PRODUCT', {\n          productId\n        });\n        await productService.onShelfProduct(productId, userInfo.value.phone);\n        logger.info('PRODUCT_LIST', '‰∫ßÂìÅ‰∏äÊû∂ÊàêÂäü', {\n          productId\n        });\n        loadProducts();\n      } catch (error) {\n        logger.error('PRODUCT_LIST', '‰∫ßÂìÅ‰∏äÊû∂Â§±Ë¥•', {\n          productId,\n          errorMessage: error.message || error\n        }, error);\n        alert('‰∏äÊû∂Â§±Ë¥•Ôºö' + (error.message || error));\n      }\n    };\n\n    // ‰∏ãÊû∂‰∫ßÂìÅ\n    const handleOffShelf = async productId => {\n      try {\n        logger.userAction('OFF_SHELF_PRODUCT', {\n          productId\n        });\n        await productService.offShelfProduct(productId, userInfo.value.phone);\n        logger.info('PRODUCT_LIST', '‰∫ßÂìÅ‰∏ãÊû∂ÊàêÂäü', {\n          productId\n        });\n        loadProducts();\n      } catch (error) {\n        logger.error('PRODUCT_LIST', '‰∫ßÂìÅ‰∏ãÊû∂Â§±Ë¥•', {\n          productId,\n          errorMessage: error.message || error\n        }, error);\n        alert('‰∏ãÊû∂Â§±Ë¥•Ôºö' + (error.message || error));\n      }\n    };\n\n    // Ë¥≠‰π∞‰∫ßÂìÅ\n    const handlePurchase = product => {\n      logger.userAction('PURCHASE_PRODUCT', {\n        productId: product.product_id\n      });\n      if (product.status === 'on_shelf' && product.stock > 0) {\n        purchasingProduct.value = product;\n        showOrderForm.value = true;\n      } else {\n        alert('ÂïÜÂìÅ‰∏çÂèØË¥≠‰π∞');\n      }\n    };\n\n    // ËÆ¢ÂçïÂàõÂª∫ÊàêÂäü\n    const handleOrderSuccess = orderData => {\n      logger.info('PRODUCT_LIST', 'ËÆ¢ÂçïÂàõÂª∫ÊàêÂäü', {\n        orderId: orderData?.order_id\n      });\n      showOrderForm.value = false;\n      purchasingProduct.value = null;\n      // ÈáçÊñ∞Âä†ËΩΩ‰∫ßÂìÅÂàóË°®‰ª•Êõ¥Êñ∞Â∫ìÂ≠ò\n      loadProducts();\n    };\n\n    // ÊâπÈáèÊìç‰Ωú\n    const handleBatchAction = () => {\n      logger.userAction('BATCH_ACTION_CLICK', {\n        count: selectedProducts.value.length\n      });\n      showBatchModal.value = true;\n    };\n\n    // ÊâπÈáèÊìç‰ΩúÁ°ÆËÆ§\n    const handleBatchConfirm = async action => {\n      try {\n        logger.userAction('BATCH_CONFIRM', {\n          action,\n          count: selectedProducts.value.length\n        });\n        await productService.batchActionProducts(action, selectedProducts.value, userInfo.value.phone);\n        logger.info('PRODUCT_LIST', 'ÊâπÈáèÊìç‰ΩúÊàêÂäü', {\n          action,\n          count: selectedProducts.value.length\n        });\n        selectedProducts.value = [];\n        showBatchModal.value = false;\n        loadProducts();\n      } catch (error) {\n        logger.error('PRODUCT_LIST', 'ÊâπÈáèÊìç‰ΩúÂ§±Ë¥•', {\n          action,\n          errorMessage: error.message || error\n        }, error);\n        alert('ÊâπÈáèÊìç‰ΩúÂ§±Ë¥•Ôºö' + (error.message || error));\n      }\n    };\n\n    // Ë°®ÂçïÂÖ≥Èó≠\n    const handleFormClose = () => {\n      showCreateForm.value = false;\n      editingProduct.value = null;\n    };\n\n    // Ë°®ÂçïÊàêÂäü\n    const handleFormSuccess = () => {\n      showCreateForm.value = false;\n      editingProduct.value = null;\n      loadProducts();\n    };\n    return {\n      userInfo,\n      products,\n      loading,\n      searchKeyword,\n      statusFilter,\n      selectedProducts,\n      showCreateForm,\n      showProductDetail,\n      showBatchModal,\n      showOrderForm,\n      editingProduct,\n      viewingProductId,\n      purchasingProduct,\n      currentPage,\n      totalCount,\n      totalPages,\n      isFarmer,\n      userRoleText,\n      goBack,\n      handleSearch,\n      handleFilterChange,\n      handlePageChange,\n      handleProductSelect,\n      handleViewProduct,\n      handleEditProduct,\n      handleDeleteProduct,\n      handleOnShelf,\n      handleOffShelf,\n      handlePurchase,\n      handleBatchAction,\n      handleBatchConfirm,\n      handleFormClose,\n      handleFormSuccess,\n      handleOrderSuccess\n    };\n  }\n};","map":{"version":3,"names":["ref","computed","onMounted","reactive","useRouter","productService","logger","ProductCard","ProductForm","ProductDetail","BatchActionModal","OrderForm","name","components","setup","router","userInfo","products","loading","searchKeyword","statusFilter","selectedProducts","showCreateForm","showProductDetail","showBatchModal","showOrderForm","editingProduct","viewingProductId","purchasingProduct","currentPage","pageSize","totalCount","totalPages","value","Math","ceil","isFarmer","userType","userRoleText","roleMap","farmer","buyer","expert","bank","storedUser","localStorage","getItem","JSON","parse","info","loadProducts","error","push","warn","phone","status","title","page","response","getProductList","list","total_count","count","length","total","errorMessage","message","goBack","userAction","from","handleSearch","keyword","handleFilterChange","handlePageChange","handleProductSelect","productId","selected","index","indexOf","splice","handleViewProduct","handleEditProduct","product","product_id","handleDeleteProduct","confirm","deleteProduct","alert","handleOnShelf","onShelfProduct","handleOffShelf","offShelfProduct","handlePurchase","stock","handleOrderSuccess","orderData","orderId","order_id","handleBatchAction","handleBatchConfirm","action","batchActionProducts","handleFormClose","handleFormSuccess"],"sources":["D:\\STUDY\\FarmerHappy\\farmer_happy\\src\\trading\\ProductList.vue"],"sourcesContent":["<template>\r\n  <div class=\"product-list-container\">\r\n    <!-- È°∂ÈÉ®ÂØºËà™Ê†è -->\r\n    <header class=\"header\">\r\n      <div class=\"header-left\">\r\n        <button class=\"btn-back\" @click=\"goBack\">\r\n          <span class=\"back-icon\">‚Üê</span>\r\n          ËøîÂõû\r\n        </button>\r\n        <h1 class=\"page-title\">ÂÜú‰∫ßÂìÅ‰∫§Êòì</h1>\r\n      </div>\r\n      <div class=\"header-right\">\r\n        <div class=\"user-info\">\r\n          <span class=\"user-name\">{{ userInfo.nickname || 'Áî®Êà∑' }}</span>\r\n          <span class=\"user-role\">{{ userRoleText }}</span>\r\n        </div>\r\n      </div>\r\n    </header>\r\n\r\n    <!-- ÊêúÁ¥¢ÂíåÁ≠õÈÄâÂå∫Âüü -->\r\n    <div class=\"search-section\">\r\n      <div class=\"search-container\">\r\n        <div class=\"search-box\">\r\n          <input\r\n            v-model=\"searchKeyword\"\r\n            type=\"text\"\r\n            placeholder=\"ÊêúÁ¥¢ÂÜú‰∫ßÂìÅÊ†áÈ¢ò...\"\r\n            class=\"search-input\"\r\n            @keyup.enter=\"handleSearch\"\r\n          />\r\n          <button class=\"search-btn\" @click=\"handleSearch\">\r\n            <span class=\"search-icon\">üîç</span>\r\n          </button>\r\n        </div>\r\n        \r\n        <div class=\"filter-section\">\r\n          <select v-model=\"statusFilter\" class=\"filter-select\" @change=\"handleFilterChange\">\r\n            <option value=\"\">ÂÖ®ÈÉ®Áä∂ÊÄÅ</option>\r\n            <option value=\"draft\">ËçâÁ®ø</option>\r\n            <option value=\"on_shelf\">Âú®ÂîÆ</option>\r\n            <option value=\"off_shelf\">‰∏ãÊû∂</option>\r\n            <option value=\"sold_out\">ÂîÆÁΩÑ</option>\r\n          </select>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Êìç‰ΩúÊåâÈíÆÂå∫Âüü -->\r\n    <div class=\"action-section\" v-if=\"isFarmer\">\r\n      <button class=\"btn-primary\" @click=\"showCreateForm = true\">\r\n        <span class=\"btn-icon\">+</span>\r\n        ÂèëÂ∏ÉÂÜú‰∫ßÂìÅ\r\n      </button>\r\n      <button \r\n        class=\"btn-secondary\" \r\n        @click=\"handleBatchAction\"\r\n        :disabled=\"selectedProducts.length === 0\"\r\n      >\r\n        <span class=\"btn-icon\">üì¶</span>\r\n        ÊâπÈáèÊìç‰Ωú ({{ selectedProducts.length }})\r\n      </button>\r\n    </div>\r\n\r\n    <!-- ‰∫ßÂìÅÂàóË°® -->\r\n    <div class=\"products-section\">\r\n      <div v-if=\"loading\" class=\"loading-container\">\r\n        <div class=\"loading-spinner\"></div>\r\n        <p>Âä†ËΩΩ‰∏≠...</p>\r\n      </div>\r\n\r\n      <div v-else-if=\"products.length === 0\" class=\"empty-container\">\r\n        <div class=\"empty-icon\">üåæ</div>\r\n        <h3>ÊöÇÊó†ÂÜú‰∫ßÂìÅ</h3>\r\n        <p v-if=\"isFarmer\">ÁÇπÂáª\"ÂèëÂ∏ÉÂÜú‰∫ßÂìÅ\"ÂºÄÂßãÂèëÂ∏ÉÊÇ®ÁöÑ‰∫ßÂìÅ</p>\r\n        <p v-else>ÊöÇÊó†ÂèØË¥≠‰π∞ÁöÑÂÜú‰∫ßÂìÅ</p>\r\n      </div>\r\n\r\n      <div v-else class=\"products-grid\">\r\n        <ProductCard\r\n          v-for=\"product in products\"\r\n          :key=\"product.product_id\"\r\n          :product=\"product\"\r\n          :is-farmer=\"isFarmer\"\r\n          :selected=\"selectedProducts.includes(product.product_id)\"\r\n          @select=\"handleProductSelect\"\r\n          @view=\"handleViewProduct\"\r\n          @edit=\"handleEditProduct\"\r\n          @delete=\"handleDeleteProduct\"\r\n          @on-shelf=\"handleOnShelf\"\r\n          @off-shelf=\"handleOffShelf\"\r\n          @purchase=\"handlePurchase\"\r\n        />\r\n      </div>\r\n    </div>\r\n\r\n    <!-- ÂàÜÈ°µ -->\r\n    <div class=\"pagination-section\" v-if=\"totalCount > 0 && totalPages > 0\">\r\n      <div class=\"pagination-info\">\r\n        ÂÖ± {{ totalCount }} ‰∏™‰∫ßÂìÅ\r\n      </div>\r\n      <div class=\"pagination-controls\">\r\n        <button \r\n          class=\"pagination-btn\" \r\n          @click=\"handlePageChange(currentPage - 1)\"\r\n          :disabled=\"currentPage <= 1\"\r\n        >\r\n          ‰∏ä‰∏ÄÈ°µ\r\n        </button>\r\n        <span class=\"pagination-info\">\r\n          Á¨¨ {{ currentPage }} È°µ / ÂÖ± {{ totalPages }} È°µ\r\n        </span>\r\n        <button \r\n          class=\"pagination-btn\" \r\n          @click=\"handlePageChange(currentPage + 1)\"\r\n          :disabled=\"currentPage >= totalPages\"\r\n        >\r\n          ‰∏ã‰∏ÄÈ°µ\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- ÂàõÂª∫/ÁºñËæë‰∫ßÂìÅË°®ÂçïÂºπÁ™ó -->\r\n    <ProductForm\r\n      v-if=\"showCreateForm\"\r\n      :product=\"editingProduct\"\r\n      :is-edit=\"!!editingProduct\"\r\n      @close=\"handleFormClose\"\r\n      @success=\"handleFormSuccess\"\r\n    />\r\n\r\n    <!-- ‰∫ßÂìÅËØ¶ÊÉÖÂºπÁ™ó -->\r\n    <ProductDetail\r\n      v-if=\"showProductDetail\"\r\n      :product-id=\"viewingProductId\"\r\n      @close=\"showProductDetail = false\"\r\n      @purchase=\"handlePurchase\"\r\n    />\r\n\r\n    <!-- ÊâπÈáèÊìç‰ΩúÂºπÁ™ó -->\r\n    <BatchActionModal\r\n      v-if=\"showBatchModal\"\r\n      :selected-count=\"selectedProducts.length\"\r\n      @close=\"showBatchModal = false\"\r\n      @confirm=\"handleBatchConfirm\"\r\n    />\r\n\r\n    <!-- ËÆ¢ÂçïË°®ÂçïÂºπÁ™ó -->\r\n    <OrderForm\r\n      v-if=\"showOrderForm && purchasingProduct\"\r\n      :product=\"purchasingProduct\"\r\n      @close=\"showOrderForm = false\"\r\n      @success=\"handleOrderSuccess\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, computed, onMounted, reactive } from 'vue';\r\nimport { useRouter } from 'vue-router';\r\nimport { productService } from '../api/product';\r\nimport logger from '../utils/logger';\r\nimport ProductCard from '../components/ProductCard.vue';\r\nimport ProductForm from '../components/ProductForm.vue';\r\nimport ProductDetail from '../components/ProductDetail.vue';\r\nimport BatchActionModal from '../components/BatchActionModal.vue';\r\nimport OrderForm from '../components/OrderForm.vue';\r\n\r\nexport default {\r\n  name: 'ProductList',\r\n  components: {\r\n    ProductCard,\r\n    ProductForm,\r\n    ProductDetail,\r\n    BatchActionModal,\r\n    OrderForm\r\n  },\r\n  setup() {\r\n    const router = useRouter();\r\n    const userInfo = ref({});\r\n    const products = ref([]);\r\n    const loading = ref(false);\r\n    const searchKeyword = ref('');\r\n    const statusFilter = ref('');\r\n    const selectedProducts = ref([]);\r\n    const showCreateForm = ref(false);\r\n    const showProductDetail = ref(false);\r\n    const showBatchModal = ref(false);\r\n    const showOrderForm = ref(false);\r\n    const editingProduct = ref(null);\r\n    const viewingProductId = ref(null);\r\n    const purchasingProduct = ref(null);\r\n\r\n    // ÂàÜÈ°µÁõ∏ÂÖ≥\r\n    const currentPage = ref(1);\r\n    const pageSize = ref(12);\r\n    const totalCount = ref(0);\r\n    const totalPages = computed(() => {\r\n      if (totalCount.value === 0) return 0;\r\n      return Math.ceil(totalCount.value / pageSize.value) || 1;\r\n    });\r\n\r\n    // Áî®Êà∑Á±ªÂûãÂà§Êñ≠\r\n    const isFarmer = computed(() => userInfo.value.userType === 'farmer');\r\n\r\n    // Áî®Êà∑ËßíËâ≤ÊñáÊú¨\r\n    const userRoleText = computed(() => {\r\n      const roleMap = {\r\n        farmer: 'ÂÜúÊà∑',\r\n        buyer: '‰π∞ÂÆ∂',\r\n        expert: 'ÊäÄÊúØ‰∏ìÂÆ∂',\r\n        bank: 'Èì∂Ë°å'\r\n      };\r\n      return roleMap[userInfo.value.userType] || 'Êó†';\r\n    });\r\n\r\n    // Ëé∑ÂèñÁî®Êà∑‰ø°ÊÅØ\r\n    onMounted(() => {\r\n      const storedUser = localStorage.getItem('user');\r\n      if (storedUser) {\r\n        try {\r\n          userInfo.value = JSON.parse(storedUser);\r\n          logger.info('PRODUCT_LIST', 'Âä†ËΩΩÁî®Êà∑‰ø°ÊÅØÊàêÂäü', { userType: userInfo.value.userType });\r\n          loadProducts();\r\n        } catch (error) {\r\n          logger.error('PRODUCT_LIST', 'Ëß£ÊûêÁî®Êà∑‰ø°ÊÅØÂ§±Ë¥•', {}, error);\r\n          router.push('/login');\r\n        }\r\n      } else {\r\n        logger.warn('PRODUCT_LIST', 'Êú™ÊâæÂà∞Áî®Êà∑‰ø°ÊÅØÔºåË∑≥ËΩ¨Âà∞ÁôªÂΩïÈ°µ');\r\n        router.push('/login');\r\n      }\r\n    });\r\n\r\n    // Âä†ËΩΩ‰∫ßÂìÅÂàóË°®\r\n    const loadProducts = async () => {\r\n      loading.value = true;\r\n      try {\r\n        logger.info('PRODUCT_LIST', 'ÂºÄÂßãÂä†ËΩΩ‰∫ßÂìÅÂàóË°®', {\r\n          phone: userInfo.value.phone,\r\n          status: statusFilter.value,\r\n          title: searchKeyword.value,\r\n          page: currentPage.value\r\n        });\r\n\r\n        const response = await productService.getProductList(\r\n          userInfo.value.phone,\r\n          statusFilter.value || null,\r\n          searchKeyword.value || null\r\n        );\r\n\r\n        products.value = response.list || [];\r\n        totalCount.value = response.total_count || 0;\r\n\r\n        logger.info('PRODUCT_LIST', '‰∫ßÂìÅÂàóË°®Âä†ËΩΩÊàêÂäü', {\r\n          count: products.value.length,\r\n          total: totalCount.value\r\n        });\r\n      } catch (error) {\r\n        logger.error('PRODUCT_LIST', 'Âä†ËΩΩ‰∫ßÂìÅÂàóË°®Â§±Ë¥•', {\r\n          errorMessage: error.message || error\r\n        }, error);\r\n        products.value = [];\r\n        totalCount.value = 0;\r\n      } finally {\r\n        loading.value = false;\r\n      }\r\n    };\r\n\r\n    // ËøîÂõû‰∏ä‰∏ÄÈ°µ\r\n    const goBack = () => {\r\n      logger.userAction('BACK_CLICK', { from: 'product_list' });\r\n      router.push('/home');\r\n    };\r\n\r\n    // ÊêúÁ¥¢Â§ÑÁêÜ\r\n    const handleSearch = () => {\r\n      logger.userAction('SEARCH_CLICK', { keyword: searchKeyword.value });\r\n      currentPage.value = 1;\r\n      loadProducts();\r\n    };\r\n\r\n    // Á≠õÈÄâÂ§ÑÁêÜ\r\n    const handleFilterChange = () => {\r\n      logger.userAction('FILTER_CHANGE', { status: statusFilter.value });\r\n      currentPage.value = 1;\r\n      loadProducts();\r\n    };\r\n\r\n    // ÂàÜÈ°µÂ§ÑÁêÜ\r\n    const handlePageChange = (page) => {\r\n      if (page >= 1 && page <= totalPages.value) {\r\n        logger.userAction('PAGE_CHANGE', { page });\r\n        currentPage.value = page;\r\n        loadProducts();\r\n      }\r\n    };\r\n\r\n    // ‰∫ßÂìÅÈÄâÊã©Â§ÑÁêÜ\r\n    const handleProductSelect = (productId, selected) => {\r\n      if (selected) {\r\n        selectedProducts.value.push(productId);\r\n      } else {\r\n        const index = selectedProducts.value.indexOf(productId);\r\n        if (index > -1) {\r\n          selectedProducts.value.splice(index, 1);\r\n        }\r\n      }\r\n      logger.userAction('PRODUCT_SELECT', { productId, selected });\r\n    };\r\n\r\n    // Êü•Áúã‰∫ßÂìÅËØ¶ÊÉÖ\r\n    const handleViewProduct = (productId) => {\r\n      logger.userAction('VIEW_PRODUCT', { productId });\r\n      viewingProductId.value = productId;\r\n      showProductDetail.value = true;\r\n    };\r\n\r\n    // ÁºñËæë‰∫ßÂìÅ\r\n    const handleEditProduct = (product) => {\r\n      logger.userAction('EDIT_PRODUCT', { productId: product.product_id });\r\n      editingProduct.value = product;\r\n      showCreateForm.value = true;\r\n    };\r\n\r\n    // Âà†Èô§‰∫ßÂìÅ\r\n    const handleDeleteProduct = async (productId) => {\r\n      if (!confirm('Á°ÆÂÆöË¶ÅÂà†Èô§Ëøô‰∏™‰∫ßÂìÅÂêóÔºü')) {\r\n        return;\r\n      }\r\n\r\n      try {\r\n        logger.userAction('DELETE_PRODUCT', { productId });\r\n        await productService.deleteProduct(productId, userInfo.value.phone);\r\n        logger.info('PRODUCT_LIST', '‰∫ßÂìÅÂà†Èô§ÊàêÂäü', { productId });\r\n        loadProducts();\r\n      } catch (error) {\r\n        logger.error('PRODUCT_LIST', 'Âà†Èô§‰∫ßÂìÅÂ§±Ë¥•', {\r\n          productId,\r\n          errorMessage: error.message || error\r\n        }, error);\r\n        alert('Âà†Èô§Â§±Ë¥•Ôºö' + (error.message || error));\r\n      }\r\n    };\r\n\r\n    // ‰∏äÊû∂‰∫ßÂìÅ\r\n    const handleOnShelf = async (productId) => {\r\n      try {\r\n        logger.userAction('ON_SHELF_PRODUCT', { productId });\r\n        await productService.onShelfProduct(productId, userInfo.value.phone);\r\n        logger.info('PRODUCT_LIST', '‰∫ßÂìÅ‰∏äÊû∂ÊàêÂäü', { productId });\r\n        loadProducts();\r\n      } catch (error) {\r\n        logger.error('PRODUCT_LIST', '‰∫ßÂìÅ‰∏äÊû∂Â§±Ë¥•', {\r\n          productId,\r\n          errorMessage: error.message || error\r\n        }, error);\r\n        alert('‰∏äÊû∂Â§±Ë¥•Ôºö' + (error.message || error));\r\n      }\r\n    };\r\n\r\n    // ‰∏ãÊû∂‰∫ßÂìÅ\r\n    const handleOffShelf = async (productId) => {\r\n      try {\r\n        logger.userAction('OFF_SHELF_PRODUCT', { productId });\r\n        await productService.offShelfProduct(productId, userInfo.value.phone);\r\n        logger.info('PRODUCT_LIST', '‰∫ßÂìÅ‰∏ãÊû∂ÊàêÂäü', { productId });\r\n        loadProducts();\r\n      } catch (error) {\r\n        logger.error('PRODUCT_LIST', '‰∫ßÂìÅ‰∏ãÊû∂Â§±Ë¥•', {\r\n          productId,\r\n          errorMessage: error.message || error\r\n        }, error);\r\n        alert('‰∏ãÊû∂Â§±Ë¥•Ôºö' + (error.message || error));\r\n      }\r\n    };\r\n\r\n    // Ë¥≠‰π∞‰∫ßÂìÅ\r\n    const handlePurchase = (product) => {\r\n      logger.userAction('PURCHASE_PRODUCT', { productId: product.product_id });\r\n      if (product.status === 'on_shelf' && product.stock > 0) {\r\n        purchasingProduct.value = product;\r\n        showOrderForm.value = true;\r\n      } else {\r\n        alert('ÂïÜÂìÅ‰∏çÂèØË¥≠‰π∞');\r\n      }\r\n    };\r\n\r\n    // ËÆ¢ÂçïÂàõÂª∫ÊàêÂäü\r\n    const handleOrderSuccess = (orderData) => {\r\n      logger.info('PRODUCT_LIST', 'ËÆ¢ÂçïÂàõÂª∫ÊàêÂäü', { orderId: orderData?.order_id });\r\n      showOrderForm.value = false;\r\n      purchasingProduct.value = null;\r\n      // ÈáçÊñ∞Âä†ËΩΩ‰∫ßÂìÅÂàóË°®‰ª•Êõ¥Êñ∞Â∫ìÂ≠ò\r\n      loadProducts();\r\n    };\r\n\r\n    // ÊâπÈáèÊìç‰Ωú\r\n    const handleBatchAction = () => {\r\n      logger.userAction('BATCH_ACTION_CLICK', { count: selectedProducts.value.length });\r\n      showBatchModal.value = true;\r\n    };\r\n\r\n    // ÊâπÈáèÊìç‰ΩúÁ°ÆËÆ§\r\n    const handleBatchConfirm = async (action) => {\r\n      try {\r\n        logger.userAction('BATCH_CONFIRM', { action, count: selectedProducts.value.length });\r\n        await productService.batchActionProducts(action, selectedProducts.value, userInfo.value.phone);\r\n        logger.info('PRODUCT_LIST', 'ÊâπÈáèÊìç‰ΩúÊàêÂäü', { action, count: selectedProducts.value.length });\r\n        selectedProducts.value = [];\r\n        showBatchModal.value = false;\r\n        loadProducts();\r\n      } catch (error) {\r\n        logger.error('PRODUCT_LIST', 'ÊâπÈáèÊìç‰ΩúÂ§±Ë¥•', {\r\n          action,\r\n          errorMessage: error.message || error\r\n        }, error);\r\n        alert('ÊâπÈáèÊìç‰ΩúÂ§±Ë¥•Ôºö' + (error.message || error));\r\n      }\r\n    };\r\n\r\n    // Ë°®ÂçïÂÖ≥Èó≠\r\n    const handleFormClose = () => {\r\n      showCreateForm.value = false;\r\n      editingProduct.value = null;\r\n    };\r\n\r\n    // Ë°®ÂçïÊàêÂäü\r\n    const handleFormSuccess = () => {\r\n      showCreateForm.value = false;\r\n      editingProduct.value = null;\r\n      loadProducts();\r\n    };\r\n\r\n    return {\r\n      userInfo,\r\n      products,\r\n      loading,\r\n      searchKeyword,\r\n      statusFilter,\r\n      selectedProducts,\r\n      showCreateForm,\r\n      showProductDetail,\r\n      showBatchModal,\r\n      showOrderForm,\r\n      editingProduct,\r\n      viewingProductId,\r\n      purchasingProduct,\r\n      currentPage,\r\n      totalCount,\r\n      totalPages,\r\n      isFarmer,\r\n      userRoleText,\r\n      goBack,\r\n      handleSearch,\r\n      handleFilterChange,\r\n      handlePageChange,\r\n      handleProductSelect,\r\n      handleViewProduct,\r\n      handleEditProduct,\r\n      handleDeleteProduct,\r\n      handleOnShelf,\r\n      handleOffShelf,\r\n      handlePurchase,\r\n      handleBatchAction,\r\n      handleBatchConfirm,\r\n      handleFormClose,\r\n      handleFormSuccess,\r\n      handleOrderSuccess\r\n    };\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n@import '../assets/styles/theme.css';\r\n\r\n.product-list-container {\r\n  min-height: 100vh;\r\n  background: linear-gradient(135deg, #f5f3ff 0%, #ede9fe 100%);\r\n}\r\n\r\n/* È°∂ÈÉ®ÂØºËà™Ê†è */\r\n.header {\r\n  background: var(--white);\r\n  padding: 1rem 2rem;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  box-shadow: 0 2px 8px rgba(107, 70, 193, 0.1);\r\n  position: sticky;\r\n  top: 0;\r\n  z-index: 100;\r\n}\r\n\r\n.header-left {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 1rem;\r\n}\r\n\r\n.btn-back {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n  padding: 0.5rem 1rem;\r\n  background: transparent;\r\n  border: 1px solid var(--gray-300);\r\n  border-radius: 8px;\r\n  color: var(--gray-600);\r\n  font-size: 0.875rem;\r\n  cursor: pointer;\r\n  transition: all 0.2s;\r\n}\r\n\r\n.btn-back:hover {\r\n  background: var(--gray-100);\r\n  border-color: var(--primary-light);\r\n  color: var(--primary);\r\n}\r\n\r\n.back-icon {\r\n  font-size: 1rem;\r\n}\r\n\r\n.page-title {\r\n  font-size: 1.5rem;\r\n  font-weight: 600;\r\n  color: var(--primary);\r\n  margin: 0;\r\n}\r\n\r\n.header-right {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.user-info {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: flex-end;\r\n}\r\n\r\n.user-name {\r\n  font-size: 0.875rem;\r\n  font-weight: 600;\r\n  color: #1a202c;\r\n}\r\n\r\n.user-role {\r\n  font-size: 0.75rem;\r\n  color: var(--primary);\r\n}\r\n\r\n/* ÊêúÁ¥¢Âå∫Âüü */\r\n.search-section {\r\n  padding: 1.5rem 2rem;\r\n}\r\n\r\n.search-container {\r\n  max-width: 1200px;\r\n  margin: 0 auto;\r\n  display: flex;\r\n  gap: 1rem;\r\n  align-items: center;\r\n}\r\n\r\n.search-box {\r\n  flex: 1;\r\n  display: flex;\r\n  background: var(--white);\r\n  border-radius: 12px;\r\n  box-shadow: 0 2px 8px rgba(107, 70, 193, 0.1);\r\n  overflow: hidden;\r\n}\r\n\r\n.search-input {\r\n  flex: 1;\r\n  padding: 0.875rem 1rem;\r\n  border: none;\r\n  outline: none;\r\n  font-size: 1rem;\r\n  background: transparent;\r\n}\r\n\r\n.search-input::placeholder {\r\n  color: var(--gray-400);\r\n}\r\n\r\n.search-btn {\r\n  padding: 0.875rem 1rem;\r\n  background: var(--primary);\r\n  border: none;\r\n  color: var(--white);\r\n  cursor: pointer;\r\n  transition: background 0.2s;\r\n}\r\n\r\n.search-btn:hover {\r\n  background: var(--primary-dark);\r\n}\r\n\r\n.search-icon {\r\n  font-size: 1rem;\r\n}\r\n\r\n.filter-section {\r\n  display: flex;\r\n  gap: 0.5rem;\r\n}\r\n\r\n.filter-select {\r\n  padding: 0.875rem 1rem;\r\n  border: 1px solid var(--gray-300);\r\n  border-radius: 8px;\r\n  background: var(--white);\r\n  font-size: 0.875rem;\r\n  cursor: pointer;\r\n  min-width: 120px;\r\n}\r\n\r\n/* Êìç‰ΩúÊåâÈíÆÂå∫Âüü */\r\n.action-section {\r\n  padding: 0 2rem 1rem;\r\n  max-width: 1200px;\r\n  margin: 0 auto;\r\n  display: flex;\r\n  gap: 1rem;\r\n}\r\n\r\n.btn-primary, .btn-secondary {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n  padding: 0.75rem 1.5rem;\r\n  border: none;\r\n  border-radius: 8px;\r\n  font-size: 0.875rem;\r\n  font-weight: 500;\r\n  cursor: pointer;\r\n  transition: all 0.2s;\r\n}\r\n\r\n.btn-primary {\r\n  background: var(--primary);\r\n  color: var(--white);\r\n}\r\n\r\n.btn-primary:hover {\r\n  background: var(--primary-dark);\r\n}\r\n\r\n.btn-secondary {\r\n  background: var(--white);\r\n  color: var(--primary);\r\n  border: 1px solid var(--primary);\r\n}\r\n\r\n.btn-secondary:hover {\r\n  background: var(--primary-light);\r\n  color: var(--white);\r\n}\r\n\r\n.btn-secondary:disabled {\r\n  opacity: 0.5;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.btn-icon {\r\n  font-size: 1rem;\r\n}\r\n\r\n/* ‰∫ßÂìÅÂàóË°®Âå∫Âüü */\r\n.products-section {\r\n  padding: 0 2rem 2rem;\r\n  max-width: 1200px;\r\n  margin: 0 auto;\r\n}\r\n\r\n.loading-container, .empty-container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 4rem 2rem;\r\n  background: var(--white);\r\n  border-radius: 16px;\r\n  box-shadow: 0 4px 12px rgba(107, 70, 193, 0.08);\r\n}\r\n\r\n.loading-spinner {\r\n  width: 40px;\r\n  height: 40px;\r\n  border: 4px solid var(--gray-200);\r\n  border-top: 4px solid var(--primary);\r\n  border-radius: 50%;\r\n  animation: spin 1s linear infinite;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n@keyframes spin {\r\n  0% { transform: rotate(0deg); }\r\n  100% { transform: rotate(360deg); }\r\n}\r\n\r\n.empty-icon {\r\n  font-size: 4rem;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.empty-container h3 {\r\n  font-size: 1.25rem;\r\n  font-weight: 600;\r\n  color: var(--gray-500);\r\n  margin-bottom: 0.5rem;\r\n}\r\n\r\n.empty-container p {\r\n  color: var(--gray-400);\r\n  margin: 0;\r\n}\r\n\r\n.products-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));\r\n  gap: 1.5rem;\r\n}\r\n\r\n/* ÂàÜÈ°µÂå∫Âüü */\r\n.pagination-section {\r\n  padding: 2rem;\r\n  max-width: 1200px;\r\n  margin: 0 auto;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  background: var(--white);\r\n  border-radius: 12px;\r\n  box-shadow: 0 2px 8px rgba(107, 70, 193, 0.1);\r\n}\r\n\r\n.pagination-info {\r\n  color: var(--gray-500);\r\n  font-size: 0.875rem;\r\n}\r\n\r\n.pagination-controls {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 1rem;\r\n}\r\n\r\n.pagination-btn {\r\n  padding: 0.5rem 1rem;\r\n  border: 1px solid var(--gray-300);\r\n  border-radius: 6px;\r\n  background: var(--white);\r\n  color: var(--gray-600);\r\n  font-size: 0.875rem;\r\n  cursor: pointer;\r\n  transition: all 0.2s;\r\n}\r\n\r\n.pagination-btn:hover:not(:disabled) {\r\n  background: var(--primary);\r\n  color: var(--white);\r\n  border-color: var(--primary);\r\n}\r\n\r\n.pagination-btn:disabled {\r\n  opacity: 0.5;\r\n  cursor: not-allowed;\r\n}\r\n\r\n/* ÂìçÂ∫îÂºèËÆæËÆ° */\r\n@media (max-width: 768px) {\r\n  .header {\r\n    padding: 1rem;\r\n  }\r\n\r\n  .search-section {\r\n    padding: 1rem;\r\n  }\r\n\r\n  .search-container {\r\n    flex-direction: column;\r\n    gap: 0.75rem;\r\n  }\r\n\r\n  .action-section {\r\n    padding: 0 1rem 1rem;\r\n    flex-direction: column;\r\n  }\r\n\r\n  .products-section {\r\n    padding: 0 1rem 1rem;\r\n  }\r\n\r\n  .products-grid {\r\n    grid-template-columns: 1fr;\r\n  }\r\n\r\n  .pagination-section {\r\n    padding: 1rem;\r\n    flex-direction: column;\r\n    gap: 1rem;\r\n  }\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}